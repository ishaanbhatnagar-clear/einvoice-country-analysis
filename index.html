<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Global E-Invoicing Country Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; line-height: 1.6; color: #1e293b; background: #f8fafc; padding: 20px; -webkit-font-smoothing: antialiased; }
        .container { max-width: 1600px; margin: 0 auto; }
        h1 { color: #0f172a; margin-bottom: 10px; font-size: 2.2em; font-weight: 700; letter-spacing: -0.025em; }
        h2 { color: #1e293b; margin: 30px 0 15px; font-size: 1.5rem; letter-spacing: -0.02em; border-bottom: none; }
        h3 { color: #334155; margin: 20px 0 10px; font-weight: 600; }
        .subtitle { color: #64748b; margin-bottom: 30px; }

        /* Navigation - Segmented Control */
        .main-nav { display: inline-flex; gap: 0; margin-bottom: 25px; background: #f1f5f9; padding: 4px; border-radius: 12px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.02); border: 1px solid #e2e8f0; }
        .nav-btn { padding: 10px 20px; border: none; border-radius: 8px; background: transparent; cursor: pointer; font-size: 0.9em; font-weight: 500; transition: all 0.2s; display: flex; align-items: center; gap: 8px; color: #64748b; }
        .nav-btn:hover:not(.active) { background: rgba(255,255,255,0.5); color: #334155; }
        .nav-btn.active { background: white; color: #0f172a; box-shadow: 0 1px 3px rgba(0,0,0,0.1); font-weight: 600; }
        .nav-btn .icon { font-size: 1.1em; }

        .main-section { display: none; }
        .main-section.active { display: block; }

        /* Stats Grid - Compact */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; margin-bottom: 20px; }
        .stat-card { background: white; padding: 12px 16px; border-radius: 12px; border: 1px solid rgba(226, 232, 240, 0.8); box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.04); text-align: center; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .stat-card:hover { transform: translateY(-1px); box-shadow: 0 4px 8px -2px rgba(0, 0, 0, 0.06); }
        .stat-number { font-size: 1.6rem; font-weight: 700; background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; letter-spacing: -0.02em; }
        .stat-label { color: #94a3b8; font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.04em; font-weight: 600; }

        /* Tables - Modern Style */
        .table-container { overflow-x: auto; margin-bottom: 30px; border-radius: 16px; border: 1px solid rgba(226, 232, 240, 0.8); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); max-height: 70vh; overflow-y: auto; }
        table { width: 100%; border-collapse: separate; border-spacing: 0; background: white; min-width: 1200px; }
        table.fixed-layout { table-layout: fixed; }
        table.fixed-layout td { white-space: normal; word-wrap: break-word; overflow-wrap: break-word; vertical-align: top; }
        th { background: rgba(248, 250, 252, 0.95); backdrop-filter: blur(8px); position: sticky; top: 0; z-index: 10; color: #475569; padding: 14px 10px; text-align: left; font-weight: 600; font-size: 11px; cursor: pointer; white-space: nowrap; text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 1px solid #e2e8f0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        th:hover { background: rgba(241, 245, 249, 0.98); }
        th.sortable::after { content: ' \2195'; opacity: 0.5; }
        th.sort-asc::after { content: ' \2191'; opacity: 1; }
        th.sort-desc::after { content: ' \2193'; opacity: 1; }
        td { padding: 14px 10px; border-bottom: 1px solid #f1f5f9; font-size: 13px; vertical-align: middle; color: #334155; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        td.wrap { white-space: normal; max-width: 120px; }
        td.country-cell { white-space: nowrap; }
        td.country-cell strong { font-weight: 600; }
        tr:hover { background-color: #f8fafc; }
        tr:last-child td { border-bottom: none; }
        a { color: #3b82f6; text-decoration: none; font-weight: 500; }
        a:hover { text-decoration: underline; color: #2563eb; }

        /* Status & Potential Badges - Soft Pastel Pills */
        .status, .potential, .coverage { padding: 4px 10px; border-radius: 50px; font-size: 11px; font-weight: 500; display: inline-block; letter-spacing: 0.01em; }
        .status-active { background: rgba(134, 239, 172, 0.35); color: #15803d; }
        .status-pending { background: rgba(253, 224, 71, 0.35); color: #a16207; }
        .status-planned { background: rgba(196, 181, 253, 0.35); color: #7c3aed; }
        .status-voluntary { background: rgba(203, 213, 225, 0.4); color: #475569; }
        .status-phased { background: rgba(253, 186, 116, 0.35); color: #c2410c; }
        .potential-very-high { background: rgba(252, 165, 165, 0.35); color: #dc2626; }
        .potential-high { background: rgba(253, 186, 116, 0.35); color: #ea580c; }
        .potential-medium { background: rgba(147, 197, 253, 0.35); color: #2563eb; }
        .potential-low { background: rgba(203, 213, 225, 0.4); color: #64748b; }
        .potential-mature { background: rgba(196, 181, 253, 0.35); color: #7c3aed; }
        .coverage-b2b { background: rgba(134, 239, 172, 0.3); color: #16a34a; }
        .coverage-b2g { background: rgba(147, 197, 253, 0.3); color: #2563eb; }
        .coverage-b2c { background: rgba(253, 186, 116, 0.3); color: #ea580c; }
        .accred-yes { color: #dc2626; font-weight: 600; }
        .accred-no { color: #16a34a; }

        /* Tooltip */
        .info-icon { display: inline-flex; align-items: center; justify-content: center; width: 16px; height: 16px; background: rgba(59, 130, 246, 0.1); color: #3b82f6; border-radius: 50%; font-size: 10px; font-weight: 600; cursor: help; margin-left: 6px; vertical-align: middle; position: relative; }
        .info-icon:hover { background: rgba(59, 130, 246, 0.2); }
        .tooltip { visibility: hidden; opacity: 0; position: absolute; z-index: 100; top: 50%; left: 100%; transform: translateY(-50%); margin-left: 10px; width: 260px; background: #1e293b; color: white; padding: 12px 14px; border-radius: 10px; font-size: 12px; font-weight: 400; line-height: 1.5; box-shadow: 0 10px 25px rgba(0,0,0,0.2); transition: opacity 0.2s, visibility 0.2s; pointer-events: none; }
        .tooltip::before { content: ''; position: absolute; top: 50%; right: 100%; transform: translateY(-50%); border: 6px solid transparent; border-right-color: #1e293b; }
        .info-icon:hover .tooltip { visibility: visible; opacity: 1; }
        .tooltip-label { display: block; font-size: 11px; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px; }
        .tooltip-fact { display: block; margin-bottom: 6px; font-size: 12px; }
        .tooltip-fact:last-child { margin-bottom: 0; }
        .tooltip-highlight { color: #fbbf24; font-weight: 600; }

        /* Toolbar */
        .toolbar { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; background: white; padding: 16px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #e2e8f0; }
        .toolbar-left { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
        .region-filter { padding: 10px 14px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 0.9em; background: #f8fafc; cursor: pointer; color: #334155; font-weight: 500; }
        .region-filter:focus { outline: none; border-color: #3b82f6; background: white; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }

        /* Sort Controls */
        .sort-controls { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
        .sort-btn { padding: 6px 14px; border: 1px solid #e2e8f0; border-radius: 6px; background: #f8fafc; cursor: pointer; font-size: 0.8em; transition: all 0.2s; color: #64748b; font-weight: 500; }
        .sort-btn:hover { border-color: #3b82f6; background: #eff6ff; color: #3b82f6; }
        .sort-btn.active { background: #3b82f6; color: white; border-color: #3b82f6; box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3); }

        /* Search */
        .search-box { width: 100%; max-width: 350px; padding: 10px 14px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 0.9em; background: #f8fafc; }
        .search-box:focus { outline: none; border-color: #3b82f6; background: white; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }

        /* Timeline Graph - Vertical Grouped */
        .timeline-graph { background: white; border-radius: 16px; padding: 25px; border: 1px solid rgba(226, 232, 240, 0.8); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03); margin-bottom: 30px; }
        .timeline-vertical { position: relative; padding-left: 100px; }
        .timeline-year-group { position: relative; margin-bottom: 30px; }
        .timeline-year-label { position: absolute; left: -100px; top: 0; width: 80px; font-size: 1.4em; font-weight: 700; color: #2d3748; text-align: right; }
        .timeline-year-line { position: absolute; left: -10px; top: 0; bottom: -30px; width: 3px; background: linear-gradient(180deg, #4299e1, #9f7aea); border-radius: 3px; }
        .timeline-events { display: flex; flex-wrap: wrap; gap: 10px; padding: 5px 0; }
        .timeline-event { display: flex; align-items: center; gap: 8px; padding: 10px 14px; background: #f7fafc; border-radius: 8px; border-left: 4px solid #e2e8f0; transition: all 0.2s; cursor: default; }
        .timeline-event:hover { background: #edf2f7; transform: translateX(5px); }
        .timeline-event.status-active { border-left-color: #48bb78; background: #f0fff4; }
        .timeline-event.status-pending { border-left-color: #ecc94b; background: #fffff0; }
        .timeline-event.status-planned { border-left-color: #9f7aea; background: #faf5ff; }
        .timeline-event-flag { font-size: 1.3em; }
        .timeline-event-info { display: flex; flex-direction: column; }
        .timeline-event-country { font-weight: 600; color: #2d3748; font-size: 0.95em; }
        .timeline-event-date { font-size: 0.75em; color: #718096; }
        .timeline-event-desc { font-size: 0.75em; color: #4a5568; margin-top: 2px; }
        .timeline-legend { display: flex; gap: 20px; margin-bottom: 20px; flex-wrap: wrap; }
        .timeline-legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.85em; }
        .timeline-legend-dot { width: 12px; height: 12px; border-radius: 3px; }
        .legend-active { background: #48bb78; }
        .legend-pending { background: #ecc94b; }
        .legend-planned { background: #9f7aea; }

        /* Legend Box */
        .legend-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; margin-top: 40px; margin-bottom: 25px; }
        .legend-box { background: white; border-radius: 16px; padding: 18px 20px; border: 1px solid rgba(226, 232, 240, 0.8); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03); }
        .legend-box h4 { color: #1e293b; font-size: 0.9em; margin-bottom: 12px; border-bottom: 1px solid #f1f5f9; padding-bottom: 10px; font-weight: 600; }
        .legend-item { display: flex; align-items: flex-start; margin-bottom: 6px; font-size: 0.78em; }
        .legend-item:last-child { margin-bottom: 0; }
        .legend-item .badge { min-width: 70px; margin-right: 10px; }
        .legend-item .desc { color: #64748b; }

        /* Footer */
        .footer { margin-top: 40px; padding: 20px; text-align: center; color: #718096; font-size: 0.85em; }

        /* Ticker */
        .ticker-wrap { width: 100%; overflow: hidden; background: linear-gradient(90deg, #1e293b, #334155); padding: 10px 0; margin-bottom: 25px; border-radius: 10px; }
        .ticker { display: inline-block; white-space: nowrap; animation: ticker 25s linear infinite; }
        .ticker-item { display: inline-block; padding: 0 50px; color: #fbbf24; font-weight: 500; font-size: 0.85em; }
        .ticker-item span { color: #f8fafc; font-weight: 600; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* Players */
        .players { font-size: 12px; color: #4a5568; }
        .players strong { color: #2b6cb0; }
        .small-text { font-size: 12px; color: #64748b; }

        /* Tabs - Pill Style */
        .tabs { display: inline-flex; flex-wrap: wrap; gap: 0; margin-bottom: 20px; background: #f1f5f9; padding: 4px; border-radius: 10px; }
        .tab { padding: 8px 16px; background: transparent; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85em; transition: all 0.2s; color: #64748b; font-weight: 500; }
        .tab:hover:not(.active) { background: rgba(255,255,255,0.5); color: #334155; }
        .tab.active { background: white; color: #0f172a; box-shadow: 0 1px 3px rgba(0,0,0,0.08); font-weight: 600; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        @media (max-width: 768px) {
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            table { font-size: 0.75em; }
            th, td { padding: 6px 4px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Running Ticker Disclaimer -->
        <div class="ticker-wrap">
            <div class="ticker">
                <div class="ticker-item">&#9888;&#65039; <span>DISCLAIMER:</span> This knowledge base is created as of 6 Jan 2025. Data may have changed since then.</div>
                <div class="ticker-item">&#128202; <span>Sources:</span> IMF, VATupdate, KPMG, Basware, Storecove, EDICOM, Fonoa, World Bank</div>
                <div class="ticker-item">&#9888;&#65039; <span>DISCLAIMER:</span> This knowledge base is created as of 6 Jan 2025. Data may have changed since then.</div>
            </div>
        </div>

        <h1>Global E-Invoicing Country Analysis</h1>
        <p class="subtitle">Comprehensive market intelligence for e-invoicing compliance and expansion</p>

        <!-- Main Navigation -->
        <div class="main-nav">
            <button class="nav-btn active" data-tab="overview" onclick="showMainSection('overview')"><span class="icon">&#128202;</span> Master Table</button>
            <button class="nav-btn" data-tab="timeline" onclick="showMainSection('timeline')"><span class="icon">&#128197;</span> Timeline</button>
            <button class="nav-btn" data-tab="legend" onclick="showMainSection('legend')"><span class="icon">&#128218;</span> Legend & Methodology</button>
            <button class="nav-btn" data-tab="market" onclick="showMainSection('market')"><span class="icon">&#127970;</span> Market Players</button>
            <button class="nav-btn" data-tab="data-residency" onclick="showMainSection('data-residency')"><span class="icon">&#127961;</span> Data Residency</button>
        </div>

        <!-- Section: Overview -->
        <div id="overview" class="main-section active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">78</div>
                    <div class="stat-label">Countries Tracked</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">$115T+</div>
                    <div class="stat-label">Total GDP Covered</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">~360M</div>
                    <div class="stat-label">Est. Enterprises</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">~95B+</div>
                    <div class="stat-label">Est. Annual Invoices</div>
                </div>
            </div>

            <div class="toolbar">
                <div class="toolbar-left">
                    <input type="text" class="search-box" id="searchBox" placeholder="Search countries..." onkeyup="filterTable()">
                    <select class="region-filter" id="regionFilter" onchange="filterTable()">
                        <option value="all">All Regions</option>
                        <option value="europe">Europe</option>
                        <option value="apac">Asia-Pacific</option>
                        <option value="mena">Middle East & North Africa</option>
                        <option value="latam">Latin America</option>
                        <option value="africa">Africa</option>
                        <option value="northam">North America</option>
                    </select>
                    <select class="region-filter" id="statusFilter" onchange="filterTable()">
                        <option value="all">All Status</option>
                        <option value="Pending">Pending</option>
                        <option value="Active">Active</option>
                        <option value="Phased">Phased</option>
                        <option value="Planned">Planned</option>
                        <option value="Voluntary">Voluntary</option>
                    </select>
                </div>
                <div class="sort-controls">
                    <span style="font-size:0.8em; color:#64748b; font-weight:500;">Sort by:</span>
                    <button class="sort-btn active" onclick="sortTable('mandate')">Mandate Date</button>
                    <button class="sort-btn" onclick="sortTable('country')">Country</button>
                    <button class="sort-btn" onclick="sortTable('gdp')">GDP</button>
                    <button class="sort-btn" onclick="sortTable('potential')">Potential</button>
                    <button class="sort-btn" onclick="sortTable('tam')">TAM</button>
                    <button class="sort-btn" onclick="sortTable('enterprises')">Enterprises</button>
                </div>
            </div>

            <h2>Master Table</h2>
            <div class="table-container">
            <table id="masterTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th class="sortable">Country</th>
                        <th class="sortable">GDP</th>
                        <th class="sortable">Potential</th>
                        <th class="wrap">Mandate</th>
                        <th>Coverage</th>
                        <th>Model</th>
                        <th>Status</th>
                        <th class="sortable">Enterprises</th>
                        <th class="sortable">Est. Invoices/Yr</th>
                        <th class="sortable">TAM ($M)</th>
                        <th>Tax Authority</th>
                        <th>Accred?</th>
                        <th class="sortable">Accred Time</th>
                        <th>Providers</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
            </div>
        </div>

        <!-- Section: Timeline -->
        <div id="timeline" class="main-section">
            <h2>E-Invoicing Mandate Timeline (2025-2030)</h2>
            <div class="timeline-graph">
                <div class="timeline-legend">
                    <div class="timeline-legend-item"><div class="timeline-legend-dot legend-active"></div> Active / Receiving</div>
                    <div class="timeline-legend-item"><div class="timeline-legend-dot legend-pending"></div> Pending / Phased</div>
                    <div class="timeline-legend-item"><div class="timeline-legend-dot legend-planned"></div> Planned / Future</div>
                </div>
                <div class="timeline-vertical" id="timelineVisual">
                    <!-- Timeline will be generated by JS -->
                </div>
            </div>
        </div>

        <!-- Section: Legend & Methodology -->
        <div id="legend" class="main-section">
            <h2>Legend & Methodology</h2>
            <div class="legend-container">
                <div class="legend-box">
                    <h4>&#128202; Potential Rating Formula</h4>
                    <div class="legend-item"><span class="desc"><strong>Potential Score</strong> = (GDP Weight x 40%) + (Mandate Stage x 30%) + (Market Maturity x 30%)</span></div>
                    <div class="legend-item"><span class="badge"><span class="potential potential-very-high">Very High</span></span><span class="desc">Score > 80: GDP >$1T + New mandate (high growth)</span></div>
                    <div class="legend-item"><span class="badge"><span class="potential potential-high">High</span></span><span class="desc">Score 60-80: GDP $300B-$1T OR strong mandate momentum</span></div>
                    <div class="legend-item"><span class="badge"><span class="potential potential-medium">Medium</span></span><span class="desc">Score 40-60: GDP $100B-$300B OR niche opportunity</span></div>
                    <div class="legend-item"><span class="badge"><span class="potential potential-mature">Mature</span></span><span class="desc">Mandate 5+ years; Compliance saturated, value-add opportunity</span></div>
                    <div class="legend-item"><span class="badge"><span class="potential potential-low">Low</span></span><span class="desc">Score < 40: GDP <$100B with limited adoption</span></div>
                </div>
                <div class="legend-box">
                    <h4>&#127970; Model Types</h4>
                    <div class="legend-item"><strong style="min-width:70px;">Clearance</strong><span class="desc">Invoice approved by tax authority BEFORE sent to buyer</span></div>
                    <div class="legend-item"><strong style="min-width:70px;">RTIR</strong><span class="desc">Real-Time Invoice Reporting to authority</span></div>
                    <div class="legend-item"><strong style="min-width:70px;">CTC</strong><span class="desc">Continuous Transaction Controls - ongoing reporting</span></div>
                    <div class="legend-item"><strong style="min-width:70px;">Peppol</strong><span class="desc">Open network for B2B/B2G exchange (4-corner)</span></div>
                    <div class="legend-item"><strong style="min-width:70px;">Hybrid</strong><span class="desc">Mix of models (e.g., PPF+PDP in France)</span></div>
                    <div class="legend-item"><strong style="min-width:70px;">ViDA</strong><span class="desc">EU VAT in Digital Age - Jul 2030 mandate</span></div>
                </div>
                <div class="legend-box">
                    <h4>&#127970; Enterprises</h4>
                    <div class="legend-item"><span class="desc"><strong>Definition:</strong> Registered businesses/firms in the country that would be subject to e-invoicing requirements (SMEs + Large enterprises).</span></div>
                    <div class="legend-item"><span class="desc"><strong>Source:</strong> World Bank Enterprise Surveys, national business registries, IMF country data.</span></div>
                    <div class="legend-item"><span class="desc"><strong>Note:</strong> Includes formal sector businesses. Informal sector not counted.</span></div>
                </div>
                <div class="legend-box">
                    <h4>&#128200; Est. Invoices/Year</h4>
                    <div class="legend-item"><span class="desc"><strong>Calculation:</strong> Enterprises x Avg B2B invoices per enterprise (varies by economy size, 50-400/yr).</span></div>
                    <div class="legend-item"><span class="desc"><strong>Factors:</strong> GDP per enterprise, sector mix (manufacturing vs services), B2B transaction density.</span></div>
                    <div class="legend-item"><span class="desc"><strong>Source:</strong> World Bank B2B trade data, national statistics bureaus, industry reports.</span></div>
                </div>
                <div class="legend-box">
                    <h4>&#128176; TAM Calculation</h4>
                    <div class="legend-item"><span class="desc"><strong>Formula:</strong> TAM ($M) = Invoices × Regional ARPU × Market Factor</span></div>
                    <div class="legend-item"><span class="desc"><strong>Regional ARPU:</strong> W.Europe $0.12-0.18 | N.America $0.08-0.10 | E.Europe $0.04-0.06 | India/China $0.015-0.03 | LatAm $0.03-0.05</span></div>
                    <div class="legend-item"><span class="desc"><strong>Market Factor:</strong> Mandatory 1.0 | Pending 1.1 | Voluntary 0.5 | Planned 0.7</span></div>
                    <div class="legend-item"><span class="desc"><strong>Note:</strong> TAM adjusted for regional pricing and market maturity. Western Europe has highest ARPU due to certification requirements.</span></div>
                </div>
                <div class="legend-box">
                    <h4>&#128205; Coverage Types</h4>
                    <div class="legend-item"><span class="badge"><span class="coverage coverage-b2b">B2B</span></span><span class="desc">Business-to-Business transactions</span></div>
                    <div class="legend-item"><span class="badge"><span class="coverage coverage-b2g">B2G</span></span><span class="desc">Business-to-Government transactions</span></div>
                    <div class="legend-item"><span class="badge"><span class="coverage coverage-b2c">B2C</span></span><span class="desc">Business-to-Consumer transactions</span></div>
                </div>
                <div class="legend-box">
                    <h4>&#128221; Accreditation Notes</h4>
                    <div class="legend-item"><span class="desc"><strong>Accreditation Required:</strong> Whether formal certification/registration with tax authority is needed to operate as an e-invoice provider.</span></div>
                    <div class="legend-item"><span class="desc"><strong>Timeline Calculation:</strong></span></div>
                    <div class="legend-item"><span class="desc">&#8226; <strong>1-2 mo:</strong> Peppol markets (already Peppol AP certified) - just local registration</span></div>
                    <div class="legend-item"><span class="desc">&#8226; <strong>3-6 mo:</strong> Standard clearance markets - technical integration + certification tests</span></div>
                    <div class="legend-item"><span class="desc">&#8226; <strong>6-12 mo:</strong> Complex markets (Brazil, France PDP) - extensive audits, local entity requirements</span></div>
                    <div class="legend-item"><span class="desc">&#8226; <strong>12+ mo:</strong> Restricted markets (China) - local partnerships, government approvals</span></div>
                    <div class="legend-item"><span class="desc"><strong>Assumption:</strong> Clear is already a Peppol-certified Access Point, expediting Peppol-based markets.</span></div>
                </div>
                <div class="legend-box">
                    <h4>&#128200; Market Share %</h4>
                    <div class="legend-item"><span class="desc">Percentages = <strong>estimated share of e-invoice transactions</strong> by provider. Based on industry research, analyst reports, public filings. "(Gov)" = government platform.</span></div>
                </div>
            </div>
        </div>

        <!-- Section: Market Players -->
        <div id="market" class="main-section">
            <style>
                .market-section { font-size: 14px; }
                .market-section .section { background: white; border-radius: 16px; padding: 25px; margin-bottom: 25px; border: 1px solid rgba(226,232,240,0.8); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }
                .market-section .section-title { font-size: 1.2rem; margin-bottom: 15px; color: #1e293b; font-weight: 600; }
                .market-section .market-share { display: inline-block; padding: 4px 10px; border-radius: 50px; font-size: 12px; font-weight: 600; background: rgba(59,130,246,0.1); color: #2563eb; }
                .market-section .market-share.est { background: rgba(234,179,8,0.15); color: #92400e; }
                .market-section .model-badge { display: inline-block; padding: 5px 12px; border-radius: 50px; font-size: 12px; font-weight: 600; }
                .market-section .clearance { background: rgba(252,165,165,0.35); color: #dc2626; }
                .market-section .post-audit { background: rgba(134,239,172,0.35); color: #15803d; }
                .market-section .hybrid { background: rgba(196,181,253,0.35); color: #7c3aed; }
                .market-section .pending-model { background: rgba(253,224,71,0.35); color: #a16207; }
                .market-section .gdp { color: #15803d; font-weight: 600; }
                .market-section .volume { color: #7c3aed; font-weight: 600; }
                .market-section .revenue { color: #15803d; font-weight: 600; }
                .market-section .feature-tag { display: inline-block; padding: 4px 8px; border-radius: 6px; font-size: 11px; margin: 2px; font-weight: 600; }
                .market-section .f-einvoice { background: rgba(59,130,246,0.15); color: #2563eb; }
                .market-section .f-ap { background: rgba(34,197,94,0.15); color: #16a34a; }
                .market-section .f-scf { background: rgba(168,85,247,0.15); color: #9333ea; }
                .market-section .f-tax { background: rgba(234,179,8,0.15); color: #a16207; }
                .market-section .f-edi { background: rgba(239,68,68,0.15); color: #dc2626; }
                .market-section .f-erp { background: rgba(59,130,246,0.15); color: #2563eb; }
                .market-section .f-archive { background: rgba(100,116,139,0.15); color: #475569; }
                .market-section .pct-text { font-size: 13px; color: #475569; font-weight: 500; }
                .market-section .usp-list, .market-section .ai-list { margin: 0; padding-left: 16px; font-size: 13px; color: #334155; line-height: 1.5; }
                .market-section .usp-list li, .market-section .ai-list li { margin-bottom: 3px; }
                .market-section .player-link { color: #1e293b; text-decoration: none; font-weight: 600; border-bottom: 1px dashed #94a3b8; }
                .market-section .player-link:hover { color: #2563eb; border-bottom-color: #2563eb; }
                .market-section .country-cell { font-weight: 600; display: flex; align-items: center; gap: 8px; white-space: nowrap; }
                .market-section .flag { font-size: 18px; }
                .market-section .note { background: rgba(234,179,8,0.08); border: 1px solid rgba(234,179,8,0.25); border-radius: 10px; padding: 16px; font-size: 14px; color: #92400e; margin-top: 15px; }
                .market-section .note strong { display: block; margin-bottom: 6px; color: #78350f; }
                .market-section tr.highlight { background: rgba(59,130,246,0.04); }
                .market-section tr.highlight:hover { background: rgba(59,130,246,0.08); }
                .market-section .legend { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px; font-size: 14px; color: #475569; }
                .market-section .legend-item { display: flex; align-items: center; gap: 6px; }
                .market-section .legend-dot { width: 10px; height: 10px; border-radius: 50%; }
                .market-section .feature-legend { display: flex; gap: 20px; flex-wrap: wrap; font-size: 14px; }
                .market-section .feature-legend > div { display: flex; align-items: center; gap: 8px; color: #475569; }
                .market-section .player-cell { font-weight: 500; color: #1e293b; }
            </style>
            <div class="market-section">
                <h2>ME + EU Market Analysis</h2>
                <p style="color:#64748b; margin-bottom:20px;">Top Players, Market Share & Features | 8 Key Markets</p>

                <!-- Stats -->
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-number">8</div><div class="stat-label">Markets Analyzed</div></div>
                    <div class="stat-card"><div class="stat-number">27</div><div class="stat-label">Country Players</div></div>
                    <div class="stat-card"><div class="stat-number">11</div><div class="stat-label">Global Vendors</div></div>
                    <div class="stat-card"><div class="stat-number">$18T+</div><div class="stat-label">Combined GDP</div></div>
                </div>

                <!-- Disclaimer -->
                <div class="note" style="margin-bottom:20px;">
                    <strong>Data Disclaimer:</strong> Market share data is estimated based on analyst reports, press releases, and industry research. Revenue figures are estimates for e-invoicing/compliance revenue in each specific country, not global revenue.
                </div>

                <!-- Table 1: Top Players by Country -->
                <div class="section">
                    <h3 class="section-title">Top Players by Country</h3>
                    <div class="legend">
                        <div class="legend-item"><span class="legend-dot" style="background:#2563eb"></span> Confirmed</div>
                        <div class="legend-item"><span class="legend-dot" style="background:#eab308"></span> Estimated (est.)</div>
                    </div>
                    <div class="table-container" style="max-height:none;">
                    <table style="min-width:900px;">
                        <thead><tr><th>Country</th><th>Top Player #1</th><th>Top Player #2</th><th>Top Player #3</th><th>Special</th><th>Model</th><th>GDP</th><th>E-Invoices</th></tr></thead>
                        <tbody>
                            <tr><td><div class="country-cell"><span class="flag">&#127462;&#127466;</span> UAE</div></td><td class="player-cell"><a href="https://www.sap.com" target="_blank" class="player-link">SAP</a> <span class="market-share est">~35%</span></td><td class="player-cell"><a href="https://www.oracle.com" target="_blank" class="player-link">Oracle</a> <span class="market-share est">~20%</span></td><td class="player-cell"><a href="https://www.zoho.com" target="_blank" class="player-link">Zoho</a> <span class="market-share est">~15%</span></td><td class="player-cell"><a href="https://cygnettaxtech.com" target="_blank" class="player-link"><strong>Cygnet</strong></a> <span class="market-share est">~5%</span></td><td><span class="model-badge pending-model">Clearance (pending)</span></td><td class="gdp">$481B</td><td class="volume">~350M</td></tr>
                            <tr><td><div class="country-cell"><span class="flag">&#127480;&#127462;</span> Saudi</div></td><td class="player-cell"><a href="https://cleartax.com" target="_blank" class="player-link">ClearTax</a> <span class="market-share est">~30%</span></td><td class="player-cell"><a href="https://www.sap.com" target="_blank" class="player-link">SAP</a> <span class="market-share est">~20%</span></td><td class="player-cell"><a href="https://tallysolutions.com" target="_blank" class="player-link">Tally</a> <span class="market-share est">~15%</span></td><td class="player-cell"><a href="https://cygnettaxtech.com" target="_blank" class="player-link"><strong>Cygnet</strong></a> <span class="market-share est">~8%</span></td><td><span class="model-badge clearance">FATOORA</span></td><td class="gdp">$1,067B</td><td class="volume">~800M</td></tr>
                            <tr><td><div class="country-cell"><span class="flag">&#127465;&#127466;</span> Germany</div></td><td class="player-cell"><a href="https://www.sap.com" target="_blank" class="player-link">SAP</a> <span class="market-share est">~40%</span></td><td class="player-cell"><a href="https://www.datev.de" target="_blank" class="player-link">DATEV</a> <span class="market-share est">~25%</span></td><td class="player-cell"><a href="https://www.basware.com" target="_blank" class="player-link">Basware</a> <span class="market-share est">~8%</span></td><td>-</td><td><span class="model-badge post-audit">EN 16931</span></td><td class="gdp">$4,456B</td><td class="volume">~5B</td></tr>
                            <tr><td><div class="country-cell"><span class="flag">&#127467;&#127479;</span> France</div></td><td class="player-cell"><a href="https://www.pagero.com" target="_blank" class="player-link">Pagero</a> <span class="market-share">1st PA</span></td><td class="player-cell"><a href="https://sovos.com" target="_blank" class="player-link">Sovos</a> <span class="market-share">PA #4</span></td><td class="player-cell"><a href="https://www.esker.com" target="_blank" class="player-link">Esker</a> <span class="market-share">PDP #5</span></td><td>-</td><td><span class="model-badge hybrid">PPF+PDP</span></td><td class="gdp">$3,130B</td><td class="volume">~2.5B</td></tr>
                            <tr><td><div class="country-cell"><span class="flag">&#127470;&#127481;</span> Italy</div></td><td class="player-cell"><a href="https://www.teamsystem.com" target="_blank" class="player-link">TeamSystem</a> <span class="market-share est">~25%</span></td><td class="player-cell"><a href="https://www.aruba.it" target="_blank" class="player-link">Aruba</a> <span class="market-share est">~20%</span></td><td class="player-cell"><a href="https://edicomgroup.com" target="_blank" class="player-link">EDICOM</a> <span class="market-share est">~10%</span></td><td>-</td><td><span class="model-badge clearance">SdI</span></td><td class="gdp">$2,254B</td><td class="volume">3.4B</td></tr>
                            <tr><td><div class="country-cell"><span class="flag">&#127477;&#127473;</span> Poland</div></td><td class="player-cell"><a href="https://www.comarch.com" target="_blank" class="player-link">Comarch</a> <span class="market-share est">~35%</span></td><td class="player-cell"><a href="https://www.sap.com" target="_blank" class="player-link">SAP</a> <span class="market-share est">~15%</span></td><td class="player-cell"><a href="https://www.symfonia.pl" target="_blank" class="player-link">Symfonia</a> <span class="market-share est">~12%</span></td><td>-</td><td><span class="model-badge clearance">KSeF</span></td><td class="gdp">$842B</td><td class="volume">~2.5B</td></tr>
                            <tr><td><div class="country-cell"><span class="flag">&#127466;&#127480;</span> Spain</div></td><td class="player-cell"><a href="https://edicomgroup.com" target="_blank" class="player-link">EDICOM</a> <span class="market-share est">~30%</span></td><td class="player-cell"><a href="https://www.sage.com" target="_blank" class="player-link">Sage</a> <span class="market-share est">~18%</span></td><td class="player-cell"><a href="https://www.holded.com" target="_blank" class="player-link">Holded</a> <span class="market-share est">~10%</span></td><td>-</td><td><span class="model-badge hybrid">Verifactu</span></td><td class="gdp">$1,580B</td><td class="volume">~600M</td></tr>
                            <tr class="highlight"><td><div class="country-cell"><span class="flag">&#127470;&#127475;</span> India</div></td><td class="player-cell"><a href="https://cleartax.in" target="_blank" class="player-link">ClearTax</a> <span class="market-share est">~35%</span></td><td class="player-cell"><a href="https://tallysolutions.com" target="_blank" class="player-link">Tally</a> <span class="market-share est">~25%</span></td><td class="player-cell"><a href="https://www.zoho.com" target="_blank" class="player-link">Zoho</a> <span class="market-share est">~12%</span></td><td class="player-cell"><a href="https://cygnettaxtech.com" target="_blank" class="player-link"><strong>Cygnet</strong></a> <span class="market-share est">~10%</span></td><td><span class="model-badge clearance">GST IRP</span></td><td class="gdp">$3,730B</td><td class="volume">~8B</td></tr>
                        </tbody>
                    </table>
                    </div>
                </div>

                <!-- Table 2: Player Features & Revenue Breakdown -->
                <div class="section">
                    <h3 class="section-title">Player Features & Revenue Breakdown</h3>
                    <p style="color:#64748b; font-size:13px; margin-bottom:15px;">Detailed view of players. Revenue = estimated e-invoicing/compliance revenue in that country only.</p>
                    <div style="display:flex; align-items:center; gap:8px; margin-bottom:10px; padding:8px 12px; background:rgba(59,130,246,0.08); border-radius:8px; font-size:13px; color:#2563eb;">
                        <span style="font-size:16px;">&#8597;</span> Scroll to see all data
                    </div>
                    <div class="table-container" style="max-height:100vh; overflow-y:auto;">
                    <table style="min-width:1400px;">
                        <thead>
                            <tr>
                                <th style="min-width:70px;">Country</th>
                                <th style="min-width:80px;">Player</th>
                                <th style="min-width:50px;">Type</th>
                                <th style="min-width:60px;">Mkt %</th>
                                <th style="min-width:60px;">Rev</th>
                                <th style="min-width:200px;">Features</th>
                                <th style="background:#dbeafe;min-width:50px;">E-Inv%</th>
                                <th style="background:#dbeafe;min-width:55px;">AP/AR%</th>
                                <th style="background:#dbeafe;min-width:45px;">Tax%</th>
                                <th style="background:#dbeafe;min-width:45px;">EDI%</th>
                                <th style="background:#dbeafe;min-width:55px;">Other%</th>
                                <th style="min-width:200px;">USP</th>
                                <th style="min-width:200px;">AI Features</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- UAE -->
                            <tr><td rowspan="4"><div class="country-cell"><span class="flag">&#127462;&#127466;</span> UAE</div></td><td class="player-cell"><a href="https://www.sap.com" target="_blank" class="player-link">SAP</a></td><td>Top 1</td><td><span class="market-share est">~35%</span></td><td class="revenue">~$7M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">ERP</span><span class="feature-tag f-ap">AP/AR</span><span class="feature-tag f-edi">EDI</span></td><td class="pct-text">~20%</td><td class="pct-text">~25%</td><td class="pct-text">~25%</td><td class="pct-text">~25%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>Native S/4HANA integration</li><li>80+ country compliance</li></ul></td><td><ul class="ai-list"><li>SAP DRC with Business AI</li><li>Real-time regulation updates</li></ul></td></tr>
                            <tr><td class="player-cell"><a href="https://www.oracle.com" target="_blank" class="player-link">Oracle</a></td><td>Top 2</td><td><span class="market-share est">~20%</span></td><td class="revenue">~$4M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">Cloud ERP</span><span class="feature-tag f-ap">AP/AR</span></td><td class="pct-text">~25%</td><td class="pct-text">~35%</td><td class="pct-text">~20%</td><td class="pct-text">~15%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>Full cloud ERP suite</li><li>NetSuite for SMB</li></ul></td><td><ul class="ai-list"><li>AI-powered matching</li><li>Anomaly detection</li></ul></td></tr>
                            <tr><td class="player-cell"><a href="https://www.zoho.com" target="_blank" class="player-link">Zoho</a></td><td>Top 3</td><td><span class="market-share est">~15%</span></td><td class="revenue">~$3M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">Accounting</span><span class="feature-tag f-tax">VAT Filing</span></td><td class="pct-text">~40%</td><td class="pct-text">~20%</td><td class="pct-text">~30%</td><td class="pct-text">~5%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>SMB-friendly pricing</li><li>All-in-one suite (60+ apps)</li></ul></td><td><ul class="ai-list"><li>Zia AI assistant</li><li>Auto invoice generation</li></ul></td></tr>
                            <tr><td class="player-cell"><a href="https://cygnettaxtech.com" target="_blank" class="player-link">Cygnet</a></td><td>Special</td><td><span class="market-share est">~5%</span></td><td class="revenue">~$1M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-tax">VAT Filing</span><span class="feature-tag f-erp">ERP Int.</span></td><td class="pct-text">~50%</td><td class="pct-text">~10%</td><td class="pct-text">~35%</td><td class="pct-text">~5%</td><td class="pct-text">~0%</td><td><ul class="usp-list"><li>250+ ERP connectors</li><li>India/ME tax expertise</li></ul></td><td><ul class="ai-list"><li>AI-led validation</li><li>Auto notice reply drafts</li></ul></td></tr>
                            <!-- Saudi -->
                            <tr class="highlight"><td rowspan="4"><div class="country-cell"><span class="flag">&#127480;&#127462;</span> Saudi</div></td><td class="player-cell"><a href="https://cleartax.com" target="_blank" class="player-link">ClearTax</a></td><td>Top 1</td><td><span class="market-share est">~30%</span></td><td class="revenue">~$12M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-tax">VAT Filing</span><span class="feature-tag f-erp">ERP Int.</span></td><td class="pct-text">~45%</td><td class="pct-text">~10%</td><td class="pct-text">~40%</td><td class="pct-text">~5%</td><td class="pct-text">~0%</td><td><ul class="usp-list"><li>Early ZATCA mover</li><li>50+ country coverage</li></ul></td><td><ul class="ai-list"><li>High-volume validation (6K inv/min)</li><li>Smart error detection</li></ul></td></tr>
                            <tr class="highlight"><td class="player-cell"><a href="https://www.sap.com" target="_blank" class="player-link">SAP</a></td><td>Top 2</td><td><span class="market-share est">~20%</span></td><td class="revenue">~$8M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">ERP</span><span class="feature-tag f-ap">AP/AR</span><span class="feature-tag f-edi">EDI</span></td><td class="pct-text">~20%</td><td class="pct-text">~25%</td><td class="pct-text">~20%</td><td class="pct-text">~25%</td><td class="pct-text">~10%</td><td><ul class="usp-list"><li>Enterprise standard</li><li>Native S/4HANA</li></ul></td><td><ul class="ai-list"><li>SAP DRC compliance AI</li><li>Auto format mapping</li></ul></td></tr>
                            <tr class="highlight"><td class="player-cell"><a href="https://tallysolutions.com" target="_blank" class="player-link">Tally</a></td><td>Top 3</td><td><span class="market-share est">~15%</span></td><td class="revenue">~$6M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">Accounting</span><span class="feature-tag f-tax">VAT Filing</span></td><td class="pct-text">~50%</td><td class="pct-text">~10%</td><td class="pct-text">~35%</td><td class="pct-text">~5%</td><td class="pct-text">~0%</td><td><ul class="usp-list"><li>SMB leader</li><li>Low-cost perpetual license</li></ul></td><td><ul class="ai-list"><li>AI data extraction</li><li>Smart coding</li></ul></td></tr>
                            <tr class="highlight"><td class="player-cell"><a href="https://cygnettaxtech.com" target="_blank" class="player-link">Cygnet</a></td><td>Special</td><td><span class="market-share est">~8%</span></td><td class="revenue">~$3M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-tax">ZATCA</span><span class="feature-tag f-erp">ERP Int.</span></td><td class="pct-text">~55%</td><td class="pct-text">~5%</td><td class="pct-text">~35%</td><td class="pct-text">~5%</td><td class="pct-text">~0%</td><td><ul class="usp-list"><li>ZATCA accredited</li><li>Multi-IRP fallback</li></ul></td><td><ul class="ai-list"><li>AI validation (400+ checks)</li><li>Auto notice drafts</li></ul></td></tr>
                            <!-- Germany -->
                            <tr><td rowspan="3"><div class="country-cell"><span class="flag">&#127465;&#127466;</span> Germany</div></td><td class="player-cell"><a href="https://www.sap.com" target="_blank" class="player-link">SAP</a></td><td>Top 1</td><td><span class="market-share est">~40%</span></td><td class="revenue">~$80M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">ERP</span><span class="feature-tag f-ap">AP/AR</span><span class="feature-tag f-edi">EDI</span></td><td class="pct-text">~15%</td><td class="pct-text">~25%</td><td class="pct-text">~20%</td><td class="pct-text">~30%</td><td class="pct-text">~10%</td><td><ul class="usp-list"><li>German HQ</li><li>XRechnung/ZUGFeRD native</li></ul></td><td><ul class="ai-list"><li>SAP DRC + Business AI</li><li>Peppol auto-connect</li></ul></td></tr>
                            <tr><td class="player-cell"><a href="https://www.datev.de" target="_blank" class="player-link">DATEV</a></td><td>Top 2</td><td><span class="market-share est">~25%</span></td><td class="revenue">~$50M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-tax">Tax Advisory</span><span class="feature-tag f-erp">Accounting</span></td><td class="pct-text">~25%</td><td class="pct-text">~15%</td><td class="pct-text">~45%</td><td class="pct-text">~10%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>Tax advisor ecosystem (40K+ firms)</li><li>German-only focus</li></ul></td><td><ul class="ai-list"><li>Smart document classification</li><li>Auto-booking suggestions</li></ul></td></tr>
                            <tr><td class="player-cell"><a href="https://www.basware.com" target="_blank" class="player-link">Basware</a></td><td>Top 3</td><td><span class="market-share est">~8%</span></td><td class="revenue">~$16M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-ap">AP Automation</span><span class="feature-tag f-edi">EDI</span></td><td class="pct-text">~25%</td><td class="pct-text">~55%</td><td class="pct-text">~5%</td><td class="pct-text">~10%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>AP-focused leader</li><li>90%+ touchless rate</li></ul></td><td><ul class="ai-list"><li>InvoiceAI (2.2B invoice dataset)</li><li>SmartCoding ML</li></ul></td></tr>
                            <!-- France -->
                            <tr class="highlight"><td rowspan="3"><div class="country-cell"><span class="flag">&#127467;&#127479;</span> France</div></td><td class="player-cell"><a href="https://www.pagero.com" target="_blank" class="player-link">Pagero</a></td><td>Top 1</td><td><span class="market-share">1st PA</span></td><td class="revenue">~$20M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-ap">AP/AR</span><span class="feature-tag f-edi">Network Hub</span></td><td class="pct-text">~50%</td><td class="pct-text">~30%</td><td class="pct-text">~10%</td><td class="pct-text">~5%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>1st French PA certified</li><li>14M+ business network</li></ul></td><td><ul class="ai-list"><li>ML predictive analytics</li><li>GenAI for 95% tax automation</li></ul></td></tr>
                            <tr class="highlight"><td class="player-cell"><a href="https://sovos.com" target="_blank" class="player-link">Sovos</a></td><td>Top 2</td><td><span class="market-share">PA #4</span></td><td class="revenue">~$18M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-tax">Tax Compliance</span><span class="feature-tag f-archive">E-Archive</span></td><td class="pct-text">~35%</td><td class="pct-text">~5%</td><td class="pct-text">~50%</td><td class="pct-text">~5%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>Global tax leader (16B+ txns/yr)</li><li>65+ countries</li></ul></td><td><ul class="ai-list"><li>Sovi AI: Duplicate detection</li><li>Auto-reconciliation</li></ul></td></tr>
                            <tr class="highlight"><td class="player-cell"><a href="https://www.esker.com" target="_blank" class="player-link">Esker</a></td><td>Top 3</td><td><span class="market-share">PDP #5</span></td><td class="revenue">~$25M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-ap">AP/AR Automation</span><span class="feature-tag f-erp">ERP Int.</span></td><td class="pct-text">~30%</td><td class="pct-text">~55%</td><td class="pct-text">~5%</td><td class="pct-text">~5%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>French HQ (Lyon)</li><li>PDP #0005</li><li>Gartner AP Leader</li></ul></td><td><ul class="ai-list"><li>Synergy AI: Deep learning</li><li>Anomaly detection</li></ul></td></tr>
                            <!-- Italy -->
                            <tr><td rowspan="3"><div class="country-cell"><span class="flag">&#127470;&#127481;</span> Italy</div></td><td class="player-cell"><a href="https://www.teamsystem.com" target="_blank" class="player-link">TeamSystem</a></td><td>Top 1</td><td><span class="market-share est">~25%</span></td><td class="revenue">~$63M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">ERP Suite</span><span class="feature-tag f-tax">Payroll</span><span class="feature-tag f-edi">EDI</span></td><td class="pct-text">~20%</td><td class="pct-text">~10%</td><td class="pct-text">~25%</td><td class="pct-text">~35%</td><td class="pct-text">~10%</td><td><ul class="usp-list"><li>Italian market leader</li><li>Full SMB/accountant suite</li></ul></td><td><ul class="ai-list"><li>AI document extraction</li><li>Auto-coding suggestions</li></ul></td></tr>
                            <tr><td class="player-cell"><a href="https://www.aruba.it" target="_blank" class="player-link">Aruba</a></td><td>Top 2</td><td><span class="market-share est">~20%</span></td><td class="revenue">~$50M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-archive">PEC</span><span class="feature-tag f-erp">Cloud Hosting</span></td><td class="pct-text">~60%</td><td class="pct-text">~10%</td><td class="pct-text">~15%</td><td class="pct-text">~10%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>PEC market leader</li><li>Bundled hosting + e-invoice</li></ul></td><td><ul class="ai-list"><li>Basic automation</li><li>Limited AI features</li></ul></td></tr>
                            <tr><td class="player-cell"><a href="https://edicomgroup.com" target="_blank" class="player-link">EDICOM</a></td><td>Top 3</td><td><span class="market-share est">~10%</span></td><td class="revenue">~$25M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-edi">EDI</span><span class="feature-tag f-archive">E-Signature</span></td><td class="pct-text">~30%</td><td class="pct-text">~15%</td><td class="pct-text">~15%</td><td class="pct-text">~35%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>EDI specialist</li><li>Multi-standard support</li></ul></td><td><ul class="ai-list"><li>OCR + NLP extraction</li><li>Fraud detection ML</li></ul></td></tr>
                            <!-- Poland -->
                            <tr class="highlight"><td rowspan="3"><div class="country-cell"><span class="flag">&#127477;&#127473;</span> Poland</div></td><td class="player-cell"><a href="https://www.comarch.com" target="_blank" class="player-link">Comarch</a></td><td>Top 1</td><td><span class="market-share est">~35%</span></td><td class="revenue">~$25M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-edi">EDI</span><span class="feature-tag f-erp">ERP</span></td><td class="pct-text">~25%</td><td class="pct-text">~15%</td><td class="pct-text">~10%</td><td class="pct-text">~40%</td><td class="pct-text">~10%</td><td><ul class="usp-list"><li>Polish HQ</li><li>Native KSeF integration</li><li>IDC Leader</li></ul></td><td><ul class="ai-list"><li>AI invoice analysis</li><li>ML fraud detection</li><li>GenAI chatbots</li></ul></td></tr>
                            <tr class="highlight"><td class="player-cell"><a href="https://www.sap.com" target="_blank" class="player-link">SAP</a></td><td>Top 2</td><td><span class="market-share est">~15%</span></td><td class="revenue">~$11M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">ERP</span><span class="feature-tag f-ap">AP/AR</span><span class="feature-tag f-edi">EDI</span></td><td class="pct-text">~20%</td><td class="pct-text">~25%</td><td class="pct-text">~20%</td><td class="pct-text">~25%</td><td class="pct-text">~10%</td><td><ul class="usp-list"><li>Enterprise standard</li><li>KSeF via SAP DRC</li></ul></td><td><ul class="ai-list"><li>SAP Business AI</li><li>Auto regulation updates</li></ul></td></tr>
                            <tr class="highlight"><td class="player-cell"><a href="https://www.symfonia.pl" target="_blank" class="player-link">Symfonia</a></td><td>Top 3</td><td><span class="market-share est">~12%</span></td><td class="revenue">~$8M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-tax">Accounting</span><span class="feature-tag f-erp">ERP</span></td><td class="pct-text">~35%</td><td class="pct-text">~10%</td><td class="pct-text">~40%</td><td class="pct-text">~10%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>Polish SMB focus</li><li>Accountant-friendly UI</li></ul></td><td><ul class="ai-list"><li>Basic automation</li><li>Limited AI</li></ul></td></tr>
                            <!-- Spain -->
                            <tr><td rowspan="3"><div class="country-cell"><span class="flag">&#127466;&#127480;</span> Spain</div></td><td class="player-cell"><a href="https://edicomgroup.com" target="_blank" class="player-link">EDICOM</a></td><td>Top 1</td><td><span class="market-share est">~30%</span></td><td class="revenue">~$27M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-tax">Tax Reporting</span><span class="feature-tag f-edi">EDI</span></td><td class="pct-text">~30%</td><td class="pct-text">~15%</td><td class="pct-text">~15%</td><td class="pct-text">~35%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>Spanish HQ</li><li>VeriFactu-ready</li><li>30yr EDI expertise</li></ul></td><td><ul class="ai-list"><li>OCR/NLP extraction</li><li>Smart routing ML</li></ul></td></tr>
                            <tr><td class="player-cell"><a href="https://www.sage.com" target="_blank" class="player-link">Sage</a></td><td>Top 2</td><td><span class="market-share est">~18%</span></td><td class="revenue">~$16M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">ERP</span><span class="feature-tag f-ap">AP/AR</span><span class="feature-tag f-tax">Accounting</span></td><td class="pct-text">~25%</td><td class="pct-text">~20%</td><td class="pct-text">~35%</td><td class="pct-text">~15%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>Global SMB brand</li><li>Strong accountant channel</li></ul></td><td><ul class="ai-list"><li>Sage Copilot AI</li><li>Auto bank reconciliation</li></ul></td></tr>
                            <tr><td class="player-cell"><a href="https://www.holded.com" target="_blank" class="player-link">Holded</a></td><td>Top 3</td><td><span class="market-share est">~10%</span></td><td class="revenue">~$9M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">Cloud ERP</span><span class="feature-tag f-tax">Accounting</span></td><td class="pct-text">~50%</td><td class="pct-text">~15%</td><td class="pct-text">~25%</td><td class="pct-text">~5%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>Spanish startup</li><li>Modern UX</li><li>SMB-focused</li></ul></td><td><ul class="ai-list"><li>Smart categorization</li><li>Bank sync automation</li></ul></td></tr>
                            <!-- India -->
                            <tr class="highlight"><td rowspan="4"><div class="country-cell"><span class="flag">&#127470;&#127475;</span> India</div></td><td class="player-cell"><a href="https://cleartax.in" target="_blank" class="player-link">ClearTax</a></td><td>Top 1</td><td><span class="market-share est">~35%</span></td><td class="revenue">~$10M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-tax">GST Filing</span><span class="feature-tag f-erp">ERP Int.</span></td><td class="pct-text">~35%</td><td class="pct-text">~15%</td><td class="pct-text">~45%</td><td class="pct-text">~5%</td><td class="pct-text">~0%</td><td><ul class="usp-list"><li>India's #1 tax platform</li><li>5K+ enterprises</li></ul></td><td><ul class="ai-list"><li>High-volume validation (6K inv/min)</li><li>4% avg tax savings claim</li></ul></td></tr>
                            <tr class="highlight"><td class="player-cell"><a href="https://tallysolutions.com" target="_blank" class="player-link">Tally</a></td><td>Top 2</td><td><span class="market-share est">~25%</span></td><td class="revenue">~$8M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">Accounting</span><span class="feature-tag f-tax">GST Filing</span></td><td class="pct-text">~30%</td><td class="pct-text">~20%</td><td class="pct-text">~40%</td><td class="pct-text">~5%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>2M+ licenses</li><li>Offline-capable</li><li>SMB standard</li></ul></td><td><ul class="ai-list"><li>AI data extraction</li><li>Smart doc classification</li></ul></td></tr>
                            <tr class="highlight"><td class="player-cell"><a href="https://www.zoho.com" target="_blank" class="player-link">Zoho</a></td><td>Top 3</td><td><span class="market-share est">~12%</span></td><td class="revenue">~$4M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-erp">Zoho Books</span><span class="feature-tag f-tax">GST Filing</span></td><td class="pct-text">~35%</td><td class="pct-text">~25%</td><td class="pct-text">~30%</td><td class="pct-text">~5%</td><td class="pct-text">~5%</td><td><ul class="usp-list"><li>Indian HQ</li><li>60+ app ecosystem</li><li>Global reach</li></ul></td><td><ul class="ai-list"><li>Zia AI assistant</li><li>Prompt-to-invoice</li></ul></td></tr>
                            <tr class="highlight"><td class="player-cell"><a href="https://cygnettaxtech.com" target="_blank" class="player-link">Cygnet</a></td><td>Special</td><td><span class="market-share est">~10%</span></td><td class="revenue">~$3M</td><td><span class="feature-tag f-einvoice">E-Invoicing</span><span class="feature-tag f-tax">GST Filing</span><span class="feature-tag f-erp">ERP Int.</span></td><td class="pct-text">~40%</td><td class="pct-text">~10%</td><td class="pct-text">~45%</td><td class="pct-text">~5%</td><td class="pct-text">~0%</td><td><ul class="usp-list"><li>25% of India's e-invoice traffic</li><li>250+ ERP connectors</li></ul></td><td><ul class="ai-list"><li>AI-led validation</li><li>3-way reconciliation</li></ul></td></tr>
                        </tbody>
                    </table>
                    </div>
                </div>

                <!-- Table 3: Global Players - Detailed Product Offerings -->
                <div class="section">
                    <h3 class="section-title">Top 5 Global E-Invoicing Players - Detailed Product Offerings</h3>
                    <p style="color:#64748b; font-size:14px; margin-bottom:15px;">Comprehensive breakdown of products, modules, AI features, and capabilities for the leading global e-invoicing vendors</p>
                    <div style="display:flex; align-items:center; gap:8px; margin-bottom:10px; padding:8px 12px; background:rgba(34,197,94,0.08); border-radius:8px; font-size:13px; color:#16a34a;">
                        <span style="font-size:16px;">&#127758;</span> Global vendor analysis - detailed product modules | Scroll horizontally for full view
                    </div>
                    <div class="table-container" style="max-height:100vh; overflow-y:auto;">
                    <table class="fixed-layout" style="min-width:1400px; width:1400px;">
                        <colgroup>
                            <col style="width:100px;">
                            <col style="width:380px;">
                            <col style="width:320px;">
                            <col style="width:180px;">
                            <col style="width:140px;">
                            <col style="width:180px;">
                        </colgroup>
                        <thead>
                            <tr>
                                <th>Vendor</th>
                                <th>Products & Features</th>
                                <th>AI Capabilities</th>
                                <th>Integrations</th>
                                <th>Scale</th>
                                <th>Differentiators</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Sovos -->
                            <tr>
                                <td class="player-cell"><a href="https://sovos.com" target="_blank" class="player-link">Sovos</a><br><small style="color:#64748b;">Est. 1979</small></td>
                                <td>
                                    <div style="margin-bottom:8px;"><strong style="color:#2563eb;">Tax Compliance Cloud</strong></div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>Indirect Tax Suite</strong><br>→ VAT, Sales Tax, Use Tax, Insurance Premium Tax calculation. Real-time rate determination across 14K+ jurisdictions.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>Compliance Network</strong><br>→ B2B e-invoicing, B2C e-receipts, CTC real-time reporting to 60+ tax authorities. Peppol/UBL format support.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>E-Archive</strong><br>→ Legal archiving with country-specific retention rules. Tamper-proof storage, audit-ready exports.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>VAT/Sales Tax Filing</strong><br>→ Automated periodic returns and SAF-T generation. Pre-submission validation catches errors.</div>
                                    <div style="font-size:13px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>Exemption Certificates</strong><br>→ Certificate collection, validation, and renewal tracking for tax-exempt transactions.</div>
                                </td>
                                <td>
                                    <div style="margin-bottom:6px;"><span class="feature-tag f-tax">Sovi AI</span></div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Mirror Visibility™</strong><br>→ See exactly what tax authorities see in your filings. Compare your internal view vs their view to catch discrepancies before audits.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Duplicate Detection</strong><br>→ AI scans invoices across all connected systems to identify duplicates. Prevents double-payments even when invoice numbers differ slightly.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Conversational Analytics</strong><br>→ Ask tax questions in plain English ("What's our VAT exposure in Germany?"). Get instant answers with drill-down to source documents.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Anomaly Detection</strong><br>→ Real-time monitoring flags suspicious patterns: unusual amounts, missing fields, non-compliant formats. Alerts before submission.</div>
                                    <div style="font-size:13px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Auto Tax Classification</strong><br>→ ML reads product descriptions and assigns correct tax codes automatically. Learns from corrections to improve accuracy over time.</div>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li><strong>SAP Certified</strong></li>
                                        <li>Peppol Access Point</li>
                                        <li>France PDP certified</li>
                                        <li>200+ ERP connectors</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li><strong>16B+ txns/yr</strong></li>
                                        <li>60+ countries</li>
                                        <li>100K+ customers</li>
                                        <li>50% Fortune 500</li>
                                        <li>ISO 27001, SOC 2</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li>1st AI-powered tax compliance</li>
                                        <li>Complete VAT + Sales Tax + E-Invoice</li>
                                        <li>Embedded AI (not standalone)</li>
                                    </ul>
                                </td>
                            </tr>
                            <!-- Pagero -->
                            <tr class="highlight">
                                <td class="player-cell"><a href="https://www.pagero.com" target="_blank" class="player-link">Pagero</a><br><small style="color:#64748b;">Thomson Reuters<br>Est. 2007</small></td>
                                <td>
                                    <div style="margin-bottom:8px;"><strong style="color:#2563eb;">ONESOURCE Pagero</strong></div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#eff6ff;border-radius:4px;"><strong>E-Invoicing</strong><br>→ 80+ country compliance, Post-Audit & CTC models, auto document formatting</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#eff6ff;border-radius:4px;"><strong>Network Hub</strong><br>→ 14M+ businesses connected, Peppol certified, LATAM via Gosocket</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#eff6ff;border-radius:4px;"><strong>AP/AR Automation</strong><br>→ Invoice processing, collections, supplier portal</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#eff6ff;border-radius:4px;"><strong>E-Archive</strong><br>→ Local soil storage, tamper-proof records, country-specific retention</div>
                                    <div style="font-size:13px;padding:6px 8px;background:#eff6ff;border-radius:4px;"><strong>ONESOURCE Indirect Tax</strong><br>→ VAT determination, pre-built reconciliation, filing</div>
                                </td>
                                <td>
                                    <div style="margin-bottom:6px;"><span class="feature-tag f-ap">TR AI</span></div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Predictive Analytics</strong><br>→ ML models forecast compliance risks before they occur. Identifies patterns across your transaction history to flag potential issues weeks in advance.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Auto Tax Determination</strong><br>→ AI analyzes transaction context (parties, goods, location) to select correct VAT rate. Achieves 95% automation rate without manual review.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Smart Data Enrichment</strong><br>→ NLP extracts missing fields from unstructured documents (PDFs, emails). Auto-populates mandatory fields using historical data and master records.</div>
                                    <div style="font-size:13px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Compliance Checks</strong><br>→ Pre-submission validation against 100+ country-specific rules. Suggests specific fixes for non-compliant fields before government rejection.</div>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li><strong>14M+ businesses</strong></li>
                                        <li>100+ network connections</li>
                                        <li>Peppol certified (all)</li>
                                        <li>LATAM via Gosocket</li>
                                        <li>ViDA pilot leader</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li>100+ countries</li>
                                        <li>IDC Leader</li>
                                        <li>$800M acquisition</li>
                                        <li>France 1st PA</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li>Largest interoperable network</li>
                                        <li>Thomson Reuters AI + content</li>
                                        <li>ViDA-ready architecture</li>
                                    </ul>
                                </td>
                            </tr>
                            <!-- EDICOM -->
                            <tr>
                                <td class="player-cell"><a href="https://edicomgroup.com" target="_blank" class="player-link">EDICOM</a><br><small style="color:#64748b;">Est. 1995</small></td>
                                <td>
                                    <div style="margin-bottom:8px;"><strong style="color:#2563eb;">EDICOM Global Platform</strong></div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>EDI Integration</strong><br>→ EDIFACT, X12, XML, UBL support; VDA, ODETTE, RosettaNet verticals</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>E-Invoicing</strong><br>→ B2G/B2B/B2C, 80+ countries, retail hub connectivity</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>VAT Reporting</strong><br>→ Tax declarations, SAF-T, govt. portal submission</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>Long-Term Archive</strong><br>→ eIDAS compliant, qualified e-signatures, timestamping</div>
                                    <div style="font-size:13px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>Transport Docs</strong><br>→ e-CMR, e-Waybill, Peppol Access Point</div>
                                </td>
                                <td>
                                    <div style="margin-bottom:6px;"><span class="feature-tag f-edi">EDICOM AI</span></div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>OCR + NLP Extraction</strong><br>→ Converts paper/PDF invoices to structured e-invoice data. Extracts header fields and line items automatically with 95%+ accuracy on first pass.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Fraud Detection</strong><br>→ ML scans incoming invoices for duplicate submissions, suspicious suppliers, and unusual payment patterns. Blocks fraudulent docs before AP processing.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Smart Routing</strong><br>→ Auto-routes documents to correct workflow based on content type, amount thresholds, and approval chains. Escalates exceptions to right person.</div>
                                    <div style="font-size:13px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Format Conversion</strong><br>→ Transforms between EDIFACT, X12, UBL, XML automatically. No manual mapping required - AI learns document structure from examples.</div>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li>SAP, Oracle, Dynamics, JDE</li>
                                        <li>Peppol AP (EU, APAC)</li>
                                        <li>DBNAlliance (US)</li>
                                        <li>Greece MyData (1st)</li>
                                        <li>France PDP</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li><strong>700M+ docs/yr</strong></li>
                                        <li>80+ countries</li>
                                        <li>30yr expertise</li>
                                        <li>eIDAS Qualified TSP</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li>Spanish HQ, global reach</li>
                                        <li>EDI + E-Invoice unified</li>
                                        <li>First Greece MyData certified</li>
                                    </ul>
                                </td>
                            </tr>
                            <!-- Avalara -->
                            <tr class="highlight">
                                <td class="player-cell"><a href="https://www.avalara.com" target="_blank" class="player-link">Avalara</a><br><small style="color:#64748b;">Est. 2004</small></td>
                                <td>
                                    <div style="margin-bottom:8px;"><strong style="color:#2563eb;">Avalara Suite</strong></div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#eff6ff;border-radius:4px;"><strong>AvaTax</strong><br>→ Real-time tax calculation, 1M+ tax rates, auto VAT extraction</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#eff6ff;border-radius:4px;"><strong>ELR (E-Invoicing & Live Reporting)</strong><br>→ DBNAlliance free US e-invoicing, Peppol (EU), France/Germany mandates</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#eff6ff;border-radius:4px;"><strong>VAT Reporting</strong><br>→ Global filing, automated returns, multi-jurisdiction</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#eff6ff;border-radius:4px;"><strong>Exemptions</strong><br>→ Certificate collection, validation, renewal tracking</div>
                                    <div style="font-size:13px;padding:6px 8px;background:#eff6ff;border-radius:4px;"><strong>Cross-Border</strong><br>→ Landed cost, duties, import/export compliance</div>
                                </td>
                                <td>
                                    <div style="margin-bottom:6px;"><span class="feature-tag f-tax">Avi AI Agent</span> <small>(ALFA LLMs)</small></div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>ALFA Framework</strong><br>→ Proprietary small LLMs trained specifically on tax/compliance data. Runs locally for data privacy. Powers all Avalara AI agents.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Browser Agent</strong><br>→ Patent-pending browser extension that guides ERP connector setup, observes user actions, suggests compliance tasks in context, and answers tax questions on the fly.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Outlook Agent</strong><br>→ Monitors incoming quote request emails. Auto-calculates tax and prepares response before you reply to customers. Saves hours per week.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>NetSuite Agent</strong><br>→ 1-click AvaTax setup in NetSuite. Agent configures tax codes, nexus, and mappings automatically. No implementation project required.</div>
                                    <div style="font-size:13px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Natural Language Rules</strong><br>→ Define complex tax rules in plain English ("exempt sales to nonprofits in CA"). AI converts to technical tax logic automatically.</div>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li><strong>1,200+ integrations</strong></li>
                                        <li>Workday, Salesforce</li>
                                        <li>NetSuite, Shopify</li>
                                        <li>Magento, BigCommerce</li>
                                        <li>DBNAlliance founder</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li>50+ countries</li>
                                        <li>30K+ customers</li>
                                        <li>1M+ tax rates</li>
                                        <li>99.99% uptime</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li>Free US B2B e-invoicing</li>
                                        <li>Proprietary small LLMs</li>
                                        <li>Agentic AI (autonomous)</li>
                                    </ul>
                                </td>
                            </tr>
                            <!-- Basware -->
                            <tr>
                                <td class="player-cell"><a href="https://www.basware.com" target="_blank" class="player-link">Basware</a><br><small style="color:#64748b;">Est. 1985</small></td>
                                <td>
                                    <div style="margin-bottom:8px;"><strong style="color:#2563eb;">Invoice Lifecycle Management</strong></div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>SmartPDF</strong><br>→ Converts PDF invoices to structured e-invoices using AI. Achieves 92%+ automatic processing. Captures header + line-level data.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>SmartCoding</strong><br>→ ML-based invoice coding for non-PO invoices. Suggests top 5 GL codes based on historical data. Finance controls thresholds.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>SmartMatching</strong><br>→ Automated 2-way/3-way PO matching. Handles quantity/price tolerance. Routes exceptions automatically.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>Guardian</strong><br>→ First line of defense: Filters fraudulent, duplicate, non-compliant docs before they reach AP workflows.</div>
                                    <div style="font-size:13px;padding:6px 8px;background:#f1f5f9;border-radius:4px;"><strong>AP Audit & Recovery</strong><br>→ Continuous auditing of AP transactions. Identifies duplicate payments and recovery opportunities.</div>
                                </td>
                                <td>
                                    <div style="margin-bottom:6px;"><span class="feature-tag f-ap">InvoiceAI</span> <small>(2.2B invoices trained)</small></div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>AP Data Agent</strong><br>→ Ask questions about your AP data in natural language ("What invoices are overdue from Supplier X?"). Generates reports and visualizations on demand.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>AP Business Agent</strong><br>→ Proactively surfaces risks and prioritizes your work queue. Recommends actions ("Approve these 50 invoices - all match PO"). Learns your preferences.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Supplier Agent</strong><br>→ Handles inbound supplier inquiries via chat. Resolves "Where's my payment?" questions automatically. Escalates complex issues to humans.</div>
                                    <div style="font-size:13px;margin-bottom:8px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>GenAI Compliance Agent</strong><br>→ Auto-checks invoices against regulatory requirements per country. Flags non-compliant fields before submission. Coming 2025.</div>
                                    <div style="font-size:13px;padding:6px 8px;background:#dbeafe;border-radius:4px;"><strong>Fraud Detection ML</strong><br>→ Trained on 2.2 billion invoices to spot anomalies. Identifies duplicates, fake suppliers, and unusual patterns humans would miss.</div>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li>Basware Network</li>
                                        <li>SAP, Oracle, Dynamics</li>
                                        <li>Peppol Access Point</li>
                                        <li>70+ country compliance</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li><strong>2.2B trained</strong></li>
                                        <li>90%+ touchless</li>
                                        <li>Gartner MQ Leader</li>
                                        <li>70+ countries</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul class="usp-list" style="font-size:13px;margin:0;padding-left:14px;">
                                        <li>World's largest invoice AI</li>
                                        <li>100% automation vision</li>
                                        <li>AI Agents for AP/Supplier</li>
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </div>
                    <div class="note" style="margin-top:15px;">
                        <strong>AI Trends in E-Invoicing (2025-2026):</strong>
                        <div style="margin-top:12px; display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                            <div style="padding:10px; background:rgba(255,255,255,0.6); border-radius:6px; border-left:3px solid #f59e0b;">
                                <strong style="color:#92400e;">Agentic AI</strong><br>
                                <span style="font-size:13px;">Autonomous agents that handle end-to-end invoice workflows without human intervention. Avalara's Avi agents log into ERPs via browser, Basware's AP Agent prioritizes work queues and auto-approves matching invoices.</span>
                            </div>
                            <div style="padding:10px; background:rgba(255,255,255,0.6); border-radius:6px; border-left:3px solid #f59e0b;">
                                <strong style="color:#92400e;">Embedded AI (not standalone)</strong><br>
                                <span style="font-size:13px;">AI capabilities baked directly into compliance workflows rather than separate products. Sovos Sovi AI is embedded in tax determination, Pagero's ML runs inside document routing - no separate AI "product" to buy.</span>
                            </div>
                            <div style="padding:10px; background:rgba(255,255,255,0.6); border-radius:6px; border-left:3px solid #f59e0b;">
                                <strong style="color:#92400e;">Proprietary Small Models</strong><br>
                                <span style="font-size:13px;">Vendors training domain-specific LLMs on tax/compliance data rather than using generic models. Avalara's ALFA framework runs locally for data privacy, Basware trained on 2.2B invoices for fraud detection.</span>
                            </div>
                            <div style="padding:10px; background:rgba(255,255,255,0.6); border-radius:6px; border-left:3px solid #f59e0b;">
                                <strong style="color:#92400e;">Natural Language Tax Queries</strong><br>
                                <span style="font-size:13px;">Ask questions in plain English instead of building reports. Sovos: "What's our VAT exposure in Germany?", Basware Data Agent generates visualizations, EDICOM explains raw EDI payloads in business terms.</span>
                            </div>
                        </div>
                    </div>
                    <p style="color:#64748b; font-size:11px; margin-top:12px;"><strong>Sources:</strong> Vendor websites, Gartner, IDC MarketScape, Forrester, G2 | <strong>Research:</strong> January 2026</p>
                </div>

                <!-- Feature Legend -->
                <div class="section">
                    <h3 class="section-title">Feature Categories</h3>
                    <div class="feature-legend">
                        <div><span class="feature-tag f-einvoice">E-Invoice</span> Core compliance</div>
                        <div><span class="feature-tag f-ap">AP/AR</span> Automation</div>
                        <div><span class="feature-tag f-tax">Tax</span> VAT/GST reporting</div>
                        <div><span class="feature-tag f-edi">EDI</span> Data interchange</div>
                        <div><span class="feature-tag f-erp">ERP</span> Integration</div>
                        <div><span class="feature-tag f-archive">Archive</span> Legal archiving</div>
                    </div>
                </div>

                <p style="color:#64748b; font-size:13px; text-align:center; margin-top:20px;"><strong>Sources:</strong> Company websites, Ardent Partners, IMF, Italian Revenue Agency | <strong>Research:</strong> January 2026</p>
            </div>
        </div>

        <!-- Section: Data Residency -->
        <div id="data-residency" class="main-section">
            <style>
                .dr-section { font-size: 14px; }
                .dr-disclaimer { background: #fffbeb; border: 1px solid #fcd34d; border-radius: 8px; padding: 14px 18px; margin-bottom: 24px; font-size: 0.85em; color: #92400e; }
                .dr-disclaimer strong { color: #78350f; }
                .dr-stats { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 24px; }
                .dr-stat { background: white; padding: 16px 20px; border-radius: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; flex: 1; min-width: 120px; text-align: center; }
                .dr-stat-num { font-size: 1.75rem; font-weight: 700; }
                .dr-stat-num.red { color: #dc2626; }
                .dr-stat-num.orange { color: #ea580c; }
                .dr-stat-num.blue { color: #2563eb; }
                .dr-stat-num.green { color: #16a34a; }
                .dr-stat-label { color: #64748b; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }
                .dr-aws-ref { background: linear-gradient(135deg, #ff9900 0%, #ffb84d 100%); padding: 16px 20px; border-radius: 10px; margin-bottom: 24px; }
                .dr-aws-ref h3 { color: #1e293b; font-size: 0.875rem; margin-bottom: 10px; font-weight: 600; }
                .dr-aws-chips { display: flex; flex-wrap: wrap; gap: 8px; }
                .dr-aws-chip { background: rgba(255,255,255,0.9); padding: 5px 10px; border-radius: 6px; font-size: 0.75rem; }
                .dr-aws-chip strong { color: #1e293b; }
                .dr-region-header { background: linear-gradient(135deg, #1e293b 0%, #334155 100%); color: white; padding: 14px 20px; border-radius: 10px 10px 0 0; margin-top: 30px; display: flex; align-items: center; gap: 12px; }
                .dr-region-header h2 { font-size: 1rem; font-weight: 600; margin: 0; }
                .dr-region-count { background: rgba(255,255,255,0.2); padding: 3px 10px; border-radius: 12px; font-size: 0.75rem; }
                .dr-table-container { overflow-x: auto; border: 1px solid #e2e8f0; border-top: none; border-radius: 0 0 10px 10px; margin-bottom: 10px; max-height: 100vh; }
                .dr-table { width: 100%; border-collapse: collapse; background: white; font-size: 0.8rem; table-layout: auto; }
                .dr-table th { background: #f1f5f9; padding: 12px 14px; text-align: left; font-weight: 600; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.03em; color: #475569; border-bottom: 2px solid #e2e8f0; position: sticky; top: 0; z-index: 10; white-space: nowrap; min-width: 100px; }
                .dr-table td { padding: 14px; border-bottom: 1px solid #f1f5f9; vertical-align: top; line-height: 1.5; }
                .dr-table tr:hover { background: #f8fafc; }
                .dr-country-cell { display: flex; align-items: center; gap: 10px; font-weight: 600; white-space: nowrap; font-size: 0.85rem; }
                .dr-flag { font-size: 1.25rem; }
                .dr-badge { display: inline-block; padding: 4px 10px; border-radius: 6px; font-size: 0.7rem; font-weight: 500; white-space: nowrap; }
                .dr-badge-required { background: #fef2f2; color: #dc2626; }
                .dr-badge-conditional { background: #fffbeb; color: #b45309; }
                .dr-badge-flexible { background: #f0fdf4; color: #16a34a; }
                .dr-badge-eu { background: #eff6ff; color: #2563eb; }
                .dr-badge-na { background: #f1f5f9; color: #64748b; }
                .dr-dc-local { background: #fef2f2; color: #dc2626; font-weight: 600; }
                .dr-dc-specific { background: #fff7ed; color: #c2410c; }
                .dr-dc-eu { background: #eff6ff; color: #2563eb; }
                .dr-dc-any { background: #f0fdf4; color: #16a34a; }
                .dr-conf-high { background: #dcfce7; color: #166534; }
                .dr-conf-medium { background: #fef9c3; color: #854d0e; }
                .dr-conf-low { background: #fee2e2; color: #991b1b; }
                .dr-hosting-cell { max-width: 220px; }
                .dr-hosting-main { font-weight: 600; color: #1e293b; margin-bottom: 4px; }
                .dr-hosting-warning { color: #dc2626; font-weight: 500; font-size: 0.75rem; }
                .dr-hosting-note { color: #64748b; font-size: 0.75rem; font-style: italic; }
                .dr-rationale { font-size: 0.8rem; color: #475569; max-width: 280px; line-height: 1.5; }
                .dr-link { color: #3b82f6; text-decoration: none; font-size: 0.8rem; }
                .dr-link:hover { text-decoration: underline; }
                .dr-summary { background: white; border-radius: 10px; padding: 20px 24px; margin: 30px 0; box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; }
                .dr-summary h2 { font-size: 1rem; margin-bottom: 16px; color: #1e293b; }
                .dr-summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; }
                .dr-summary-item { display: flex; gap: 12px; padding: 14px; background: #f8fafc; border-radius: 8px; }
                .dr-summary-icon { font-size: 1.25rem; flex-shrink: 0; }
                .dr-summary-content h4 { font-size: 0.85rem; color: #1e293b; margin-bottom: 4px; }
                .dr-summary-content p { font-size: 0.75rem; color: #64748b; line-height: 1.5; margin: 0; }
                .dr-toolbar { display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap; align-items: center; }
                .dr-search { flex: 1; min-width: 250px; max-width: 400px; padding: 10px 14px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 0.875rem; background: #f8fafc; }
                .dr-search:focus { outline: none; border-color: #3b82f6; background: white; }
                .dr-btn { padding: 10px 16px; border-radius: 8px; font-size: 0.8rem; font-weight: 500; cursor: pointer; border: none; display: inline-flex; align-items: center; gap: 6px; transition: all 0.2s; }
                .dr-btn-primary { background: #3b82f6; color: white; }
                .dr-btn-primary:hover { background: #2563eb; }
            </style>

            <div class="dr-section">
                <div class="dr-disclaimer">
                    <strong>Disclaimer:</strong> Research based on official government sources as of January 9, 2026. Regulations change frequently. Always verify with official tax authorities and legal counsel before making compliance decisions.
                </div>

                <div class="dr-toolbar">
                    <input type="text" class="dr-search" id="drSearchInput" placeholder="Search countries...">
                    <button class="dr-btn dr-btn-primary" onclick="downloadDRCSV()">
                        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                        Download CSV
                    </button>
                </div>

                <div class="dr-stats">
                    <div class="dr-stat">
                        <div class="dr-stat-num">41</div>
                        <div class="dr-stat-label">Countries Analyzed</div>
                    </div>
                    <div class="dr-stat">
                        <div class="dr-stat-num red">5</div>
                        <div class="dr-stat-label">Local DC Required</div>
                    </div>
                    <div class="dr-stat">
                        <div class="dr-stat-num orange">3</div>
                        <div class="dr-stat-label">Specific AWS Region</div>
                    </div>
                    <div class="dr-stat">
                        <div class="dr-stat-num blue">20</div>
                        <div class="dr-stat-label">Any EU Region</div>
                    </div>
                    <div class="dr-stat">
                        <div class="dr-stat-num green">13</div>
                        <div class="dr-stat-label">Any Region OK</div>
                    </div>
                </div>

                <div class="dr-aws-ref">
                    <h3>AWS Regions Reference</h3>
                    <div class="dr-aws-chips">
                        <div class="dr-aws-chip"><strong>me-south-1</strong> Bahrain</div>
                        <div class="dr-aws-chip"><strong>me-central-1</strong> UAE</div>
                        <div class="dr-aws-chip"><strong>il-central-1</strong> Israel</div>
                        <div class="dr-aws-chip"><strong>eu-central-1</strong> Frankfurt</div>
                        <div class="dr-aws-chip"><strong>eu-west-1</strong> Ireland</div>
                        <div class="dr-aws-chip"><strong>eu-west-2</strong> London</div>
                        <div class="dr-aws-chip"><strong>eu-west-3</strong> Paris</div>
                        <div class="dr-aws-chip"><strong>eu-south-1</strong> Milan</div>
                        <div class="dr-aws-chip"><strong>eu-south-2</strong> Spain</div>
                        <div class="dr-aws-chip"><strong>eu-north-1</strong> Stockholm</div>
                        <div class="dr-aws-chip"><strong>eu-central-2</strong> Zurich</div>
                    </div>
                </div>

                <!-- MENA Section -->
                <div class="dr-region-header">
                    <h2>Middle East & North Africa (MENA)</h2>
                    <span class="dr-region-count" id="dr-mena-count">13 countries</span>
                </div>
                <div class="dr-table-container">
                    <table class="dr-table" id="dr-mena-table">
                        <thead>
                            <tr>
                                <th>Country</th>
                                <th>Data Residency</th>
                                <th>DC Requirement</th>
                                <th>Recommended Hosting</th>
                                <th>Archival</th>
                                <th>Govt Portal</th>
                                <th>Rationale</th>
                                <th>Confidence</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-country="saudi arabia">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127480;&#127462;</span> Saudi Arabia</div></td>
                                <td><span class="dr-badge dr-badge-required">Mandatory Domestic</span></td>
                                <td><span class="dr-badge dr-dc-local">Local DC Required</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Local Saudi DC only</div>
                                    <div class="dr-hosting-warning">AWS me-south-1 (Bahrain) NOT compliant</div>
                                    <div class="dr-hosting-note">Use: STC Cloud, Mobily, Oracle KSA</div>
                                </td>
                                <td>6-11 yrs</td>
                                <td><a class="dr-link" href="https://zatca.gov.sa" target="_blank">zatca.gov.sa</a></td>
                                <td class="dr-rationale">E-Invoicing Resolution requires servers "within the country." NCA Cloud Controls mandate data inside Saudi borders.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="uae">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127462;&#127466;</span> UAE</div></td>
                                <td><span class="dr-badge dr-badge-required">Mandatory Domestic</span></td>
                                <td><span class="dr-badge dr-dc-specific">AWS me-central-1</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS me-central-1 (UAE)</div>
                                    <div class="dr-hosting-note">UAE has local AWS region - compliant for eInvoicing</div>
                                </td>
                                <td>5-15 yrs</td>
                                <td><a class="dr-link" href="https://tax.gov.ae" target="_blank">tax.gov.ae</a></td>
                                <td class="dr-rationale">Ministerial Decision 243/244 of 2025 requires storage within UAE. AWS me-central-1 satisfies this.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="turkey">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127481;&#127479;</span> Turkey</div></td>
                                <td><span class="dr-badge dr-badge-required">Mandatory Domestic</span></td>
                                <td><span class="dr-badge dr-dc-local">Local DC Required</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Local Turkish DC only</div>
                                    <div class="dr-hosting-warning">No AWS region in Turkey</div>
                                    <div class="dr-hosting-note">Use: Turkcell, Vodafone Turkey</div>
                                </td>
                                <td>5-10 yrs</td>
                                <td><a class="dr-link" href="https://www.gib.gov.tr" target="_blank">gib.gov.tr</a></td>
                                <td class="dr-rationale">VUK Communique 447 states IT infrastructure must be "within borders of Republic of Turkey."</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="egypt">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127466;&#127468;</span> Egypt</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-any">Any Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any AWS region</div>
                                    <div class="dr-hosting-note">Recommend: me-south-1 (Bahrain) for latency</div>
                                </td>
                                <td>5-7 yrs</td>
                                <td><a class="dr-link" href="https://www.eta.gov.eg" target="_blank">eta.gov.eg</a></td>
                                <td class="dr-rationale">No explicit data residency in ETA docs. All invoices submitted to central ETA system.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="israel">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127470;&#127473;</span> Israel</div></td>
                                <td><span class="dr-badge dr-badge-conditional">Conditional</span></td>
                                <td><span class="dr-badge dr-dc-specific">AWS il-central-1</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS il-central-1 (Tel Aviv)</div>
                                    <div class="dr-hosting-note">Safest option. Abroad storage needs prior ITA authorization.</div>
                                </td>
                                <td>7 yrs</td>
                                <td><a class="dr-link" href="https://taxes.gov.il" target="_blank">taxes.gov.il</a></td>
                                <td class="dr-rationale">No data localization law, but storage abroad requires ITA authorization. Using il-central-1 avoids this.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="oman">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127476;&#127474;</span> Oman</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-any">Any Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any AWS region</div>
                                    <div class="dr-hosting-note">Recommend: me-south-1 (Bahrain). Must disclose location to OTA.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://taxoman.gov.om/portal/" target="_blank">taxoman.gov.om</a></td>
                                <td class="dr-rationale">No geographic restriction mandated. Focus on ISO 27001 and security standards.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="jordan">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127471;&#127476;</span> Jordan</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-any">Any Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any AWS region</div>
                                    <div class="dr-hosting-note">Recommend: me-south-1 (Bahrain) for latency</div>
                                </td>
                                <td>4-10 yrs</td>
                                <td><a class="dr-link" href="https://istd.gov.jo" target="_blank">istd.gov.jo</a></td>
                                <td class="dr-rationale">No explicit data localization. Data centralized via JoFotara.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="qatar">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127478;&#127462;</span> Qatar</div></td>
                                <td><span class="dr-badge dr-badge-conditional">Conditional</span></td>
                                <td><span class="dr-badge dr-dc-any">Any Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any AWS region</div>
                                    <div class="dr-hosting-note">Recommend: me-south-1. Tax records in Qatar preferred.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://gta.gov.qa" target="_blank">gta.gov.qa</a></td>
                                <td class="dr-rationale">No eInvoicing mandate yet. Cloud Policy Framework (2022) removed general data localization.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="bahrain">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127463;&#127469;</span> Bahrain</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-specific">AWS me-south-1</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS me-south-1 (Bahrain)</div>
                                    <div class="dr-hosting-note">Local region available, no mandatory eInvoicing yet</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://www.nbr.gov.bh" target="_blank">nbr.gov.bh</a></td>
                                <td class="dr-rationale">PDPL has no general localization. Private sector flexible. AWS Bahrain provides optimal latency.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="kuwait">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127472;&#127484;</span> Kuwait</div></td>
                                <td><span class="dr-badge dr-badge-na">N/A</span></td>
                                <td><span class="dr-badge dr-dc-any">Any Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any AWS region</div>
                                    <div class="dr-hosting-note">No eInvoicing. Recommend: me-south-1 for latency.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://www.mof.gov.kw" target="_blank">mof.gov.kw</a></td>
                                <td class="dr-rationale">No VAT or eInvoicing mandate. No general data localization law.</td>
                                <td><span class="dr-badge dr-conf-low">Low</span></td>
                            </tr>
                            <tr data-country="morocco">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127474;&#127462;</span> Morocco</div></td>
                                <td><span class="dr-badge dr-badge-conditional">Conditional</span></td>
                                <td><span class="dr-badge dr-dc-eu">EU Region + Auth</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">EU region with CNDP authorization</div>
                                    <div class="dr-hosting-note">Recommend: eu-south-1 (Milan) or eu-west-3 (Paris)</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://tax.gov.ma" target="_blank">tax.gov.ma</a></td>
                                <td class="dr-rationale">eInvoicing 2026. Law 09-08 requires CNDP authorization for international transfers.</td>
                                <td><span class="dr-badge dr-conf-low">Low</span></td>
                            </tr>
                            <tr data-country="tunisia">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127481;&#127475;</span> Tunisia</div></td>
                                <td><span class="dr-badge dr-badge-conditional">Conditional</span></td>
                                <td><span class="dr-badge dr-dc-local">Local DC Preferred</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Local or TTN centralized</div>
                                    <div class="dr-hosting-warning">Cross-border needs INPDP auth</div>
                                    <div class="dr-hosting-note">TTN archives centrally. Consider eu-south-1 with auth.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://www.finances.gov.tn" target="_blank">finances.gov.tn</a></td>
                                <td class="dr-rationale">Centralized via TTN. Cross-border transfers require INPDP authorization.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="iraq">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127470;&#127478;</span> Iraq</div></td>
                                <td><span class="dr-badge dr-badge-na">N/A</span></td>
                                <td><span class="dr-badge dr-dc-any">Any Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any AWS region</div>
                                    <div class="dr-hosting-note">No eInvoicing mandate. Recommend: me-south-1 for latency.</div>
                                </td>
                                <td>N/A</td>
                                <td><a class="dr-link" href="https://mof.gov.iq" target="_blank">mof.gov.iq</a></td>
                                <td class="dr-rationale">No eInvoicing mandate. No PDPL. No forced data localization.</td>
                                <td><span class="dr-badge dr-conf-low">Low</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Europe Section -->
                <div class="dr-region-header">
                    <h2>Europe</h2>
                    <span class="dr-region-count" id="dr-europe-count">28 countries</span>
                </div>
                <div class="dr-table-container">
                    <table class="dr-table" id="dr-europe-table">
                        <thead>
                            <tr>
                                <th>Country</th>
                                <th>Data Residency</th>
                                <th>DC Requirement</th>
                                <th>Recommended Hosting</th>
                                <th>Archival</th>
                                <th>Govt Portal</th>
                                <th>Rationale</th>
                                <th>Confidence</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-country="germany">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127465;&#127466;</span> Germany</div></td>
                                <td><span class="dr-badge dr-badge-conditional">Conditional</span></td>
                                <td><span class="dr-badge dr-dc-eu">EU + Approval</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS eu-central-1 (Frankfurt)</div>
                                    <div class="dr-hosting-note">Domestic preferred. EU needs prior tax authority approval.</div>
                                </td>
                                <td>8-10 yrs</td>
                                <td><a class="dr-link" href="https://www.bzst.de" target="_blank">bzst.de</a></td>
                                <td class="dr-rationale">Section 146(2a) AO allows EU with prior written approval. Penalty EUR 250K/yr for unauthorized.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="france">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127467;&#127479;</span> France</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU Required</span></td>
                                <td><span class="dr-badge dr-dc-specific">AWS eu-west-3 *</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS eu-west-3 (Paris)</div>
                                    <div class="dr-hosting-warning">* PDP needs SecNumCloud cert</div>
                                    <div class="dr-hosting-note">Alternative: OVHcloud, 3DS Outscale</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://www.impots.gouv.fr" target="_blank">impots.gouv.fr</a></td>
                                <td class="dr-rationale">Decree 2024-266 requires EU hosting + SecNumCloud certification.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="italy">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127470;&#127481;</span> Italy</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU Preferred</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS eu-south-1 (Milan)</div>
                                    <div class="dr-hosting-note">In-country option. Any EU works. Free SOGEI conservation.</div>
                                </td>
                                <td>10-15 yrs</td>
                                <td><a class="dr-link" href="https://www.agenziaentrate.gov.it" target="_blank">agenziaentrate.gov.it</a></td>
                                <td class="dr-rationale">EU Regulation 2018/1807 applies. Milan region provides in-country option.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="spain">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127466;&#127480;</span> Spain</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU OK</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS eu-south-2 (Spain)</div>
                                    <div class="dr-hosting-note">In-country option. Any EU works with AEAT notification.</div>
                                </td>
                                <td>4-6 yrs</td>
                                <td><a class="dr-link" href="https://www.agenciatributaria.es" target="_blank">agenciatributaria.es</a></td>
                                <td class="dr-rationale">EU VAT Directive permits any EU. Notify AEAT when moving to another country.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="poland">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127477;&#127473;</span> Poland</div></td>
                                <td><span class="dr-badge dr-badge-required">Centralized (KSeF)</span></td>
                                <td><span class="dr-badge dr-dc-local">Govt System</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">KSeF handles storage</div>
                                    <div class="dr-hosting-note">All invoices on Polish govt servers. Keep backups in eu-central-1.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://www.podatki.gov.pl" target="_blank">podatki.gov.pl</a></td>
                                <td class="dr-rationale">KSeF centralizes all invoices on govt servers. Automatic 10-year retention.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="belgium">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127463;&#127466;</span> Belgium</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU OK</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-west-1 (Ireland) or eu-central-1 (Frankfurt)</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://finances.belgium.be" target="_blank">finances.belgium.be</a></td>
                                <td class="dr-rationale">No strict domestic requirement. Cloud permitted. Peppol certified providers.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="united kingdom uk">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127468;&#127463;</span> United Kingdom</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-any">Any Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS eu-west-2 (London)</div>
                                    <div class="dr-hosting-note">In-country option. Any region works.</div>
                                </td>
                                <td>6 yrs</td>
                                <td><a class="dr-link" href="https://www.gov.uk/government/organisations/hm-revenue-customs" target="_blank">gov.uk/hmrc</a></td>
                                <td class="dr-rationale">No geographic restrictions. MTD focuses on functional requirements.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="romania">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127479;&#127476;</span> Romania</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU OK</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-central-1. ANAF only stores 60 days.</div>
                                </td>
                                <td>10-25 yrs</td>
                                <td><a class="dr-link" href="https://www.anaf.ro" target="_blank">anaf.ro</a></td>
                                <td class="dr-rationale">EU storage permitted. Must archive XML with digital seal independently.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="hungary">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127469;&#127482;</span> Hungary</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU OK</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-central-1 (Frankfurt)</div>
                                </td>
                                <td>5-8 yrs</td>
                                <td><a class="dr-link" href="https://nav.gov.hu" target="_blank">nav.gov.hu</a></td>
                                <td class="dr-rationale">EU VAT Directive applies. NAV requires immediate access.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="netherlands">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127475;&#127473;</span> Netherlands</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU OK</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">ISO 27001 required for Peppol. AWS is certified.</div>
                                </td>
                                <td>7-10 yrs</td>
                                <td><a class="dr-link" href="https://www.belastingdienst.nl" target="_blank">belastingdienst.nl</a></td>
                                <td class="dr-rationale">EU or GDPR-adequate countries. First to mandate ISO 27001 for Peppol.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="sweden">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127480;&#127466;</span> Sweden</div></td>
                                <td><span class="dr-badge dr-badge-conditional">Conditional</span></td>
                                <td><span class="dr-badge dr-dc-eu">EU + Notify</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS eu-north-1 (Stockholm)</div>
                                    <div class="dr-hosting-note">Safest. Other EU requires Skatteverket notification.</div>
                                </td>
                                <td>7 yrs</td>
                                <td><a class="dr-link" href="https://www.skatteverket.se" target="_blank">skatteverket.se</a></td>
                                <td class="dr-rationale">Default: Sweden. EU/EEA requires notification to Skatteverket.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="norway">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127475;&#127476;</span> Norway</div></td>
                                <td><span class="dr-badge dr-badge-conditional">Conditional</span></td>
                                <td><span class="dr-badge dr-dc-eu">Nordic/EEA + Notify</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS eu-north-1 (Stockholm)</div>
                                    <div class="dr-hosting-note">Nordic exempt. EEA needs written notice.</div>
                                </td>
                                <td>Up to 35 yrs</td>
                                <td><a class="dr-link" href="https://www.skatteetaten.no" target="_blank">skatteetaten.no</a></td>
                                <td class="dr-rationale">Default: Norway. Nordic (DK, FI, IS, SE) exempt without application.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="ireland">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127470;&#127466;</span> Ireland</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU OK</span></td>
                                <td><span class="dr-badge dr-dc-eu">AWS eu-west-1</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS eu-west-1 (Ireland)</div>
                                    <div class="dr-hosting-note">In-country region with excellent connectivity.</div>
                                </td>
                                <td>6 yrs</td>
                                <td><a class="dr-link" href="https://www.revenue.ie" target="_blank">revenue.ie</a></td>
                                <td class="dr-rationale">EU storage permitted. Paper in Ireland. Ireland region provides local option.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="austria">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127462;&#127481;</span> Austria</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-central-1 (Frankfurt) for proximity.</div>
                                </td>
                                <td>7-22 yrs</td>
                                <td><a class="dr-link" href="https://www.bmf.gv.at" target="_blank">bmf.gv.at</a></td>
                                <td class="dr-rationale">No mandatory domestic requirement. Functional accessibility over location.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="switzerland">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127464;&#127469;</span> Switzerland</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-specific">AWS eu-central-2</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">AWS eu-central-2 (Zurich)</div>
                                    <div class="dr-hosting-note">In-country. Cloud requires e-signatures per GeBuV.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://www.estv.admin.ch" target="_blank">estv.admin.ch</a></td>
                                <td class="dr-rationale">No explicit domestic requirement. Zurich region optimal.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="finland">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127467;&#127470;</span> Finland</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU/EEA Preferred</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-north-1 (Stockholm) for proximity.</div>
                                </td>
                                <td>6-10 yrs</td>
                                <td><a class="dr-link" href="https://www.vero.fi" target="_blank">vero.fi</a></td>
                                <td class="dr-rationale">No explicit domestic requirement. EU/EEA preferred. Peppol pioneer since 2009.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="denmark">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127465;&#127472;</span> Denmark</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-north-1 (Stockholm). Shortest retention (5 yrs).</div>
                                </td>
                                <td>5 yrs</td>
                                <td><a class="dr-link" href="https://skat.dk" target="_blank">skat.dk</a></td>
                                <td class="dr-rationale">No geographic mandate. Focus on certified cloud-ready systems.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="portugal">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127477;&#127481;</span> Portugal</div></td>
                                <td><span class="dr-badge dr-badge-conditional">Conditional</span></td>
                                <td><span class="dr-badge dr-dc-eu">EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-south-2 (Spain) for proximity. Paper must be in Portugal.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://portaldasfinancas.gov.pt" target="_blank">portaldasfinancas.gov.pt</a></td>
                                <td class="dr-rationale">Electronic: EU permitted. Paper: Portugal. AT-certified billing required.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="greece">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127468;&#127479;</span> Greece</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-south-1 (Milan) for proximity.</div>
                                </td>
                                <td>5-10 yrs</td>
                                <td><a class="dr-link" href="https://www.aade.gr" target="_blank">aade.gr</a></td>
                                <td class="dr-rationale">No explicit data residency. myDATA real-time focus. Certified providers required.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="czech republic czechia">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127464;&#127487;</span> Czech Republic</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-central-1 (Frankfurt). Notify tax authority of location.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://www.mfcr.cz" target="_blank">mfcr.cz</a></td>
                                <td class="dr-rationale">VAT Act allows abroad. Key: immediate free electronic access.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="slovakia">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127480;&#127472;</span> Slovakia</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-central-1 (Frankfurt). UBL 2.1 from Jan 2027.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://www.financnasprava.sk" target="_blank">financnasprava.sk</a></td>
                                <td class="dr-rationale">No domestic mandate. Storage flexible. IS EFA for B2G.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="slovenia">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127480;&#127470;</span> Slovenia</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU OK</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-south-1 (Milan) or eu-central-1.</div>
                                </td>
                                <td>10-20 yrs</td>
                                <td><a class="dr-link" href="https://www.fu.gov.si" target="_blank">fu.gov.si</a></td>
                                <td class="dr-rationale">EU VAT Directive applies. EU storage permitted. 20 years for real estate.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="croatia">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127469;&#127479;</span> Croatia</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-south-1 (Milan). ISO 27001 + GDPR required.</div>
                                </td>
                                <td>11 yrs</td>
                                <td><a class="dr-link" href="https://www.porezna-uprava.hr" target="_blank">porezna-uprava.hr</a></td>
                                <td class="dr-rationale">Fiscalization focuses on real-time reporting not location. 11-year retention.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="bulgaria">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127463;&#127468;</span> Bulgaria</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-central-1 (Frankfurt). SAF-T from Jan 2026.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://portal.nra.bg" target="_blank">nra.bg</a></td>
                                <td class="dr-rationale">EU Directive framework. No explicit domestic requirement.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="latvia">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127473;&#127483;</span> Latvia</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-north-1 (Stockholm). B2B mandatory Jan 2028.</div>
                                </td>
                                <td>5-10 yrs</td>
                                <td><a class="dr-link" href="https://www.vid.gov.lv" target="_blank">vid.gov.lv</a></td>
                                <td class="dr-rationale">Abroad allowed with online access. Electronic invoices flexible.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="lithuania">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127473;&#127481;</span> Lithuania</div></td>
                                <td><span class="dr-badge dr-badge-eu">EU OK</span></td>
                                <td><span class="dr-badge dr-dc-eu">Any EU Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any EU AWS region</div>
                                    <div class="dr-hosting-note">Recommend: eu-north-1 (Stockholm). B2B mandatory Jan 2028.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://www.vmi.lt" target="_blank">vmi.lt</a></td>
                                <td class="dr-rationale">No explicit national residency. EU permitted. Focus on audit accessibility.</td>
                                <td><span class="dr-badge dr-conf-medium">Medium</span></td>
                            </tr>
                            <tr data-country="estonia">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127466;&#127466;</span> Estonia</div></td>
                                <td><span class="dr-badge dr-badge-flexible">Flexible</span></td>
                                <td><span class="dr-badge dr-dc-any">Any Region</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Any AWS region</div>
                                    <div class="dr-hosting-note">Most flexible in EU. EMTA: "may choose the place."</div>
                                </td>
                                <td>7 yrs</td>
                                <td><a class="dr-link" href="https://www.emta.ee" target="_blank">emta.ee</a></td>
                                <td class="dr-rationale">EMTA explicitly allows taxpayer choice of location. Most flexible.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                            <tr data-country="luxembourg">
                                <td><div class="dr-country-cell"><span class="dr-flag">&#127473;&#127482;</span> Luxembourg</div></td>
                                <td><span class="dr-badge dr-badge-required">Mandatory Domestic</span></td>
                                <td><span class="dr-badge dr-dc-local">Local DC Required</span></td>
                                <td class="dr-hosting-cell">
                                    <div class="dr-hosting-main">Local Luxembourg DC only</div>
                                    <div class="dr-hosting-warning">No AWS region in Luxembourg</div>
                                    <div class="dr-hosting-note">Use: LuxConnect, Ebrc, POST Luxembourg. Strictest EU.</div>
                                </td>
                                <td>10 yrs</td>
                                <td><a class="dr-link" href="https://acd.gouvernement.lu" target="_blank">acd.gouvernement.lu</a></td>
                                <td class="dr-rationale">Guichet.lu: "Place of preservation must be Luxembourg." Strictest in EU.</td>
                                <td><span class="dr-badge dr-conf-high">High</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Summary Section -->
                <div class="dr-summary">
                    <h2>Data Center Strategy Summary</h2>
                    <div class="dr-summary-grid">
                        <div class="dr-summary-item">
                            <div class="dr-summary-icon">&#128308;</div>
                            <div class="dr-summary-content">
                                <h4>Local Data Centers Required</h4>
                                <p><strong>Saudi Arabia:</strong> STC Cloud, Mobily, Oracle KSA | <strong>Turkey:</strong> Turkcell, Vodafone | <strong>Poland:</strong> KSeF (backups in EU) | <strong>Luxembourg:</strong> LuxConnect, Ebrc | <strong>Tunisia:</strong> TTN or local + auth</p>
                            </div>
                        </div>
                        <div class="dr-summary-item">
                            <div class="dr-summary-icon">&#128992;</div>
                            <div class="dr-summary-content">
                                <h4>Specific AWS Regions Required</h4>
                                <p><strong>UAE:</strong> me-central-1 | <strong>Israel:</strong> il-central-1 | <strong>France:</strong> eu-west-3 (verify SecNumCloud) | <strong>Germany:</strong> eu-central-1 (safest)</p>
                            </div>
                        </div>
                        <div class="dr-summary-item">
                            <div class="dr-summary-icon">&#128309;</div>
                            <div class="dr-summary-content">
                                <h4>Central EU Hub Strategy</h4>
                                <p><strong>Primary:</strong> eu-central-1 (Frankfurt) or eu-west-1 (Ireland) | <strong>Southern:</strong> eu-south-1 (Milan) | <strong>Nordic:</strong> eu-north-1 (Stockholm)</p>
                            </div>
                        </div>
                        <div class="dr-summary-item">
                            <div class="dr-summary-icon">&#128994;</div>
                            <div class="dr-summary-content">
                                <h4>Fully Flexible (Any Region)</h4>
                                <p>UK, Estonia, Egypt, Oman, Jordan, Qatar, Bahrain, Kuwait, Iraq. Use me-south-1 for ME, eu-central-1 for Europe.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <p style="color:#64748b; font-size:13px; text-align:center; margin-top:20px;"><strong>Sources:</strong> Official government tax authority websites, EU Digital Building Blocks, national VAT/tax legislation | <strong>Research:</strong> January 2026</p>
            </div>
        </div>

        <div class="footer">
            <p><strong>Sources:</strong> IMF, VATupdate, KPMG, Basware, Storecove, EDICOM, Fonoa, World Bank, Tax Authority websites</p>
            <p><strong>Knowledge Base Created:</strong> 6 January 2025</p>
        </div>
    </div>

    <script>
        // Country data with all fields
        const countries = [
            { id: 1, country: 'Brazil', flag: '&#127463;&#127479;', region: 'latam', gdp: 2170, gdpStr: '$2,170B', potential: 'Mature', potentialScore: 3, mandate: '2008', coverage: ['B2B','B2G','B2C'], model: 'NF-e (Clearance)', status: 'Active', enterprises: 22000000, invoices: 4500000000, tam: 200, taxAuth: 'RFB', taxUrl: 'https://www.gov.br/receitafederal', accred: 'Yes', accredTime: '6-12 mo', accredMonths: 9, providers: 'Sovos 25%, EDICOM 18%', insights: ['Pioneer in e-invoicing (2008)', 'VAT fraud reduced by 40% post-mandate', 'Complex state-level ICMS rules'] },
            { id: 2, country: 'Mexico', flag: '&#127474;&#127485;', region: 'latam', gdp: 1470, gdpStr: '$1,470B', potential: 'Mature', potentialScore: 3, mandate: '2010', coverage: ['B2B','B2G','B2C'], model: 'CFDI (Clearance)', status: 'Active', enterprises: 5500000, invoices: 2800000000, tam: 120, taxAuth: 'SAT', taxUrl: 'https://www.sat.gob.mx', accred: 'Yes (PAC)', accredTime: '3-6 mo', accredMonths: 4, providers: 'Edicom 20%, Sovos 15%', insights: ['CFDI 4.0 major upgrade in 2022', 'Strict receiver validation rules', '70+ authorized PAC providers'] },
            { id: 3, country: 'South Korea', flag: '&#127472;&#127479;', region: 'apac', gdp: 1710, gdpStr: '$1,710B', potential: 'Mature', potentialScore: 3, mandate: '2011', coverage: ['B2B','B2G'], model: 'RTIR', status: 'Active', enterprises: 7200000, invoices: 1200000000, tam: 130, taxAuth: 'NTS', taxUrl: 'https://www.nts.go.kr', accred: 'No', accredTime: 'N/A', accredMonths: 0, providers: 'NTS (Gov) 80%', insights: ['Government portal dominates 80%', 'Real-time reporting within 24hrs', 'Low VAT gap (~5%)'] },
            { id: 4, country: 'Turkey', flag: '&#127481;&#127479;', region: 'mena', gdp: 1110, gdpStr: '$1,110B', potential: 'Mature', potentialScore: 3, mandate: '2014', coverage: ['B2B','B2G'], model: 'GIB (Clearance)', status: 'Active', enterprises: 3800000, invoices: 900000000, tam: 50, taxAuth: 'GIB', taxUrl: 'https://www.gib.gov.tr', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'Foriba 30%, Logo 20%', insights: ['High inflation impacts compliance', 'e-Ledger mandate alongside', 'VAT gap reduced from 35% to 15%'] },
            { id: 5, country: 'Italy', flag: '&#127470;&#127481;', region: 'europe', gdp: 2254, gdpStr: '$2,254B', potential: 'High', potentialScore: 4, mandate: '2019', coverage: ['B2B','B2G','B2C'], model: 'SdI (Clearance)', status: 'Active', enterprises: 4500000, invoices: 3400000000, tam: 280, taxAuth: 'AdE', taxUrl: 'https://www.agenziaentrate.gov.it', accred: 'No', accredTime: 'N/A', accredMonths: 0, providers: 'TeamSystem 25%, Aruba 20%', insights: ['EU pioneer - first B2B mandate', 'VAT gap: €26B (highest in EU)', 'Recovered €2B+ in first year'] },
            { id: 6, country: 'India', flag: '&#127470;&#127475;', region: 'apac', gdp: 3730, gdpStr: '$3,730B', potential: 'Very High', potentialScore: 5, mandate: '2020', coverage: ['B2B','B2G'], model: 'GST IRP (Clearance)', status: 'Active', enterprises: 63000000, invoices: 8000000000, tam: 250, taxAuth: 'GSTN', taxUrl: 'https://www.gst.gov.in', accred: 'Yes (IRP/GSP)', accredTime: '2-4 mo', accredMonths: 3, providers: 'ClearTax 35%, Vayana 20%', insights: ['Largest invoice volume globally', 'Threshold reduced to ₹5Cr', 'High GST fraud via fake invoices'] },
            { id: 7, country: 'Saudi Arabia', flag: '&#127480;&#127462;', region: 'mena', gdp: 1067, gdpStr: '$1,067B', potential: 'Very High', potentialScore: 5, mandate: '2021-2026', coverage: ['B2B','B2G','B2C'], model: 'FATOORA (Clearance)', status: 'Active', enterprises: 1100000, invoices: 800000000, tam: 55, taxAuth: 'ZATCA', taxUrl: 'https://zatca.gov.sa', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'ClearTax 30%, SAP 20%', insights: ['Phase 2 integration ongoing', 'QR code mandatory on invoices', 'Vision 2030 digital priority'] },
            { id: 8, country: 'Germany', flag: '&#127465;&#127466;', region: 'europe', gdp: 4456, gdpStr: '$4,456B', potential: 'Very High', potentialScore: 5, mandate: '2025-2028', coverage: ['B2B'], model: 'EN 16931 (Flexible)', status: 'Phased', enterprises: 3700000, invoices: 5000000000, tam: 580, taxAuth: 'BZSt', taxUrl: 'https://www.bzst.de', accred: 'No', accredTime: 'N/A', accredMonths: 0, providers: 'SAP 40%, DATEV 25%', insights: ['VAT gap: €22B (~8%)', 'XRechnung format required', 'Mittelstand adoption challenge'] },
            { id: 9, country: 'France', flag: '&#127467;&#127479;', region: 'europe', gdp: 3130, gdpStr: '$3,130B', potential: 'Very High', potentialScore: 5, mandate: 'Sep 2026', coverage: ['B2B'], model: 'PPF+PDP (Hybrid)', status: 'Pending', enterprises: 4200000, invoices: 2500000000, tam: 600, taxAuth: 'DGFiP', taxUrl: 'https://www.impots.gouv.fr', accred: 'Yes (PDP)', accredTime: '6-9 mo', accredMonths: 7, providers: 'Pagero (1st PA), Sovos (PA #4)', insights: ['VAT gap: €15B (~7%)', 'PDP certification complex', 'Delayed twice from 2024'] },
            { id: 10, country: 'Spain', flag: '&#127466;&#127480;', region: 'europe', gdp: 1580, gdpStr: '$1,580B', potential: 'Very High', potentialScore: 5, mandate: '2027', coverage: ['B2B'], model: 'Verifactu', status: 'Pending', enterprises: 3400000, invoices: 600000000, tam: 280, taxAuth: 'AEAT', taxUrl: 'https://www.agenciatributaria.es', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'EDICOM 30%, Sage 18%', insights: ['VAT gap: €6B (~6%)', 'Dual system: SII + Verifactu', 'Anti-fraud software required'] },
            { id: 11, country: 'China', flag: '&#127464;&#127475;', region: 'apac', gdp: 17960, gdpStr: '$17,960B', potential: 'Very High', potentialScore: 5, mandate: 'Late 2025', coverage: ['B2B','B2G','B2C'], model: 'Golden Tax (Clearance)', status: 'Active', enterprises: 44000000, invoices: 15000000000, tam: 400, taxAuth: 'STA', taxUrl: 'http://www.chinatax.gov.cn', accred: 'Yes', accredTime: '12+ mo', accredMonths: 15, providers: 'Baiwang 35%, Aisino 30%', insights: ['Golden Tax since 1994', 'State-controlled duopoly', 'Fapiao fraud is criminal offense'] },
            { id: 12, country: 'Japan', flag: '&#127471;&#127477;', region: 'apac', gdp: 4230, gdpStr: '$4,230B', potential: 'Very High', potentialScore: 5, mandate: 'QIS 2023', coverage: ['B2B'], model: 'Peppol', status: 'Voluntary (QIS)', enterprises: 3600000, invoices: 2200000000, tam: 280, taxAuth: 'NTA', taxUrl: 'https://www.nta.go.jp', accred: 'No', accredTime: 'N/A', accredMonths: 0, providers: 'TKC 15%, Freee 12%', insights: ['QIS for consumption tax credit', 'Paper invoices still common', 'Hanko seal tradition fading'] },
            { id: 13, country: 'Indonesia', flag: '&#127470;&#127465;', region: 'apac', gdp: 1390, gdpStr: '$1,390B', potential: 'Very High', potentialScore: 5, mandate: '2025-2026', coverage: ['B2B','B2G'], model: 'Coretax (Clearance)', status: 'Active', enterprises: 65000000, invoices: 2500000000, tam: 85, taxAuth: 'DJP', taxUrl: 'https://www.pajak.go.id', accred: 'Yes', accredTime: '6-9 mo', accredMonths: 7, providers: 'DJP (Gov), OnlinePajak 20%', insights: ['Coretax major overhaul 2024', 'Tax ratio only 10% of GDP', 'Large informal economy'] },
            { id: 14, country: 'Malaysia', flag: '&#127474;&#127486;', region: 'apac', gdp: 430, gdpStr: '$430B', potential: 'High', potentialScore: 4, mandate: 'Jul 2025', coverage: ['B2B','B2G'], model: 'MyInvois', status: 'Active', enterprises: 1200000, invoices: 350000000, tam: 35, taxAuth: 'LHDN', taxUrl: 'https://www.hasil.gov.my', accred: 'No', accredTime: 'N/A', accredMonths: 0, providers: 'LHDN (Gov), Storecove 12%', insights: ['MyInvois launched Aug 2024', 'Phased by revenue threshold', 'Free government portal option'] },
            { id: 15, country: 'Singapore', flag: '&#127480;&#127468;', region: 'apac', gdp: 500, gdpStr: '$500B', potential: 'High', potentialScore: 4, mandate: 'Nov 2025', coverage: ['B2G'], model: 'Peppol', status: 'Active', enterprises: 280000, invoices: 180000000, tam: 30, taxAuth: 'IRAS', taxUrl: 'https://www.iras.gov.sg', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'InvoiceNow (Gov), Storecove 15%', insights: ['Peppol hub for APAC', 'InvoiceNow adoption incentives', 'Very low fraud rate'] },
            { id: 16, country: 'Belgium', flag: '&#127463;&#127466;', region: 'europe', gdp: 630, gdpStr: '$630B', potential: 'High', potentialScore: 4, mandate: 'Jan 2026', coverage: ['B2B'], model: 'Peppol', status: 'Active', enterprises: 1100000, invoices: 420000000, tam: 70, taxAuth: 'SPF Finances', taxUrl: 'https://finances.belgium.be', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Basware 15%, Pagero 12%', insights: ['VAT gap: €3B (~10%)', 'Peppol BIS 3.0 required', 'B2G mandate since 2024'] },
            { id: 17, country: 'Poland', flag: '&#127477;&#127473;', region: 'europe', gdp: 842, gdpStr: '$842B', potential: 'High', potentialScore: 4, mandate: 'Feb 2026', coverage: ['B2B'], model: 'KSeF (Clearance)', status: 'Pending', enterprises: 2300000, invoices: 2500000000, tam: 55, taxAuth: 'KAS', taxUrl: 'https://www.podatki.gov.pl', accred: 'No', accredTime: 'N/A', accredMonths: 0, providers: 'Comarch 35%, SAP 15%', insights: ['KSeF delayed from Jul 2024', 'VAT gap: €8B (~15%)', 'Clearance model like Italy'] },
            { id: 18, country: 'UAE', flag: '&#127462;&#127466;', region: 'mena', gdp: 481, gdpStr: '$481B', potential: 'High', potentialScore: 4, mandate: 'Jul 2026', coverage: ['B2B','B2G'], model: 'Clearance', status: 'Pending', enterprises: 450000, invoices: 350000000, tam: 35, taxAuth: 'FTA', taxUrl: 'https://tax.gov.ae', accred: 'TBD', accredTime: 'TBD', accredMonths: 6, providers: 'SAP 35%, Oracle 20%', insights: ['VAT introduced only in 2018', 'Following Saudi FATOORA model', 'Free zone complexities'] },
            { id: 19, country: 'Australia', flag: '&#127462;&#127482;', region: 'apac', gdp: 1720, gdpStr: '$1,720B', potential: 'High', potentialScore: 4, mandate: 'Voluntary', coverage: ['B2G'], model: 'Peppol', status: 'Voluntary', enterprises: 2500000, invoices: 1100000000, tam: 120, taxAuth: 'ATO', taxUrl: 'https://www.ato.gov.au', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Link4 18%, MessageXchange 15%', insights: ['Peppol adoption growing', 'No B2B mandate planned', 'GST fraud via fake ABNs'] },
            { id: 20, country: 'USA', flag: '&#127482;&#127480;', region: 'northam', gdp: 27360, gdpStr: '$27,360B', potential: 'Very High', potentialScore: 5, mandate: 'Voluntary', coverage: ['B2B'], model: 'DBNAlliance', status: 'Voluntary', enterprises: 33000000, invoices: 25000000000, tam: 1200, taxAuth: 'IRS', taxUrl: 'https://www.irs.gov', accred: 'No', accredTime: 'N/A', accredMonths: 0, providers: 'Coupa, SAP Ariba, Tradeshift', insights: ['No federal e-invoice mandate', 'DBNAlliance Peppol network', 'State sales tax complexity'] },
            { id: 21, country: 'UK', flag: '&#127468;&#127463;', region: 'europe', gdp: 3340, gdpStr: '$3,340B', potential: 'High', potentialScore: 4, mandate: 'B2G Active', coverage: ['B2G'], model: 'Peppol', status: 'Voluntary', enterprises: 5900000, invoices: 2800000000, tam: 350, taxAuth: 'HMRC', taxUrl: 'https://www.gov.uk/government/organisations/hm-revenue-customs', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Pagero 18%, Basware 15%', insights: ['VAT gap: £7B (~5%)', 'MTD for VAT since 2019', 'No B2B mandate post-Brexit'] },
            { id: 22, country: 'Oman', flag: '&#127476;&#127474;', region: 'mena', gdp: 115, gdpStr: '$115B', potential: 'Medium', potentialScore: 2, mandate: 'Aug 2026', coverage: ['B2B','B2G'], model: 'Peppol 5-corner', status: 'Pending', enterprises: 85000, invoices: 45000000, tam: 5, taxAuth: 'Tax Authority', taxUrl: 'https://tms.taxoman.gov.om', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Peppol APs, Storecove 10%', insights: ['First GCC Peppol adopter', 'VAT at 5% since 2021', 'Diversifying from oil revenue'] },
            { id: 23, country: 'Vietnam', flag: '&#127483;&#127475;', region: 'apac', gdp: 450, gdpStr: '$450B', potential: 'High', potentialScore: 4, mandate: '2022', coverage: ['B2B','B2G'], model: 'Clearance', status: 'Active', enterprises: 800000, invoices: 320000000, tam: 15, taxAuth: 'GDT', taxUrl: 'https://www.gdt.gov.vn', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'MISA 30%, Viettel 25%', insights: ['Rapid digitization push', 'Tax fraud common in SMEs', 'Mobile-first adoption'] },
            { id: 24, country: 'Romania', flag: '&#127479;&#127476;', region: 'europe', gdp: 350, gdpStr: '$350B', potential: 'High', potentialScore: 4, mandate: 'Jan 2024', coverage: ['B2B','B2G'], model: 'RTIR', status: 'Active', enterprises: 900000, invoices: 280000000, tam: 18, taxAuth: 'ANAF', taxUrl: 'https://www.anaf.ro', accred: 'No', accredTime: 'N/A', accredMonths: 0, providers: 'ANAF (Gov), Postis 18%', insights: ['VAT gap: €7B (~35%) - highest EU', 'RO e-Factura mandatory 2024', 'High carousel fraud history'] },
            { id: 25, country: 'Hungary', flag: '&#127469;&#127482;', region: 'europe', gdp: 210, gdpStr: '$210B', potential: 'Mature', potentialScore: 3, mandate: '2018', coverage: ['B2B','B2G'], model: 'RTIR (NAV)', status: 'Active', enterprises: 750000, invoices: 180000000, tam: 12, taxAuth: 'NAV', taxUrl: 'https://nav.gov.hu', accred: 'No', accredTime: 'N/A', accredMonths: 0, providers: 'NAV (Gov), Ecosio 15%', insights: ['Real-time reporting pioneer', 'VAT gap reduced 50%+', 'XML schema v3.0 in effect'] },
            { id: 26, country: 'Chile', flag: '&#127464;&#127473;', region: 'latam', gdp: 340, gdpStr: '$340B', potential: 'Mature', potentialScore: 3, mandate: '2014', coverage: ['B2B','B2G'], model: 'Clearance', status: 'Active', enterprises: 1200000, invoices: 250000000, tam: 15, taxAuth: 'SII', taxUrl: 'https://www.sii.cl', accred: 'No', accredTime: 'N/A', accredMonths: 0, providers: 'SII (Gov), Sovos 20%', insights: ['Free government portal popular', 'Low VAT evasion rate', 'Model for other LatAm countries'] },
            { id: 27, country: 'Philippines', flag: '&#127477;&#127469;', region: 'apac', gdp: 440, gdpStr: '$440B', potential: 'High', potentialScore: 4, mandate: 'Dec 2026', coverage: ['B2B','B2G'], model: 'CTC (EIS)', status: 'Pending', enterprises: 1100000, invoices: 380000000, tam: 20, taxAuth: 'BIR', taxUrl: 'https://www.bir.gov.ph', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'BIR (Gov), Oracle 15%', insights: ['EIS system being upgraded', 'Tax gap estimated 40%+', 'Large informal economy'] },
            { id: 28, country: 'Thailand', flag: '&#127481;&#127469;', region: 'apac', gdp: 510, gdpStr: '$510B', potential: 'High', potentialScore: 4, mandate: '2027-2028', coverage: ['B2B','B2G'], model: 'TBD', status: 'Planned', enterprises: 3200000, invoices: 520000000, tam: 20, taxAuth: 'RD', taxUrl: 'https://www.rd.go.th', accred: 'TBD', accredTime: 'TBD', accredMonths: 6, providers: 'TBD', insights: ['E-tax invoice pilot ongoing', 'VAT refund fraud issues', 'Tourism sector complexity'] },
            { id: 29, country: 'Netherlands', flag: '&#127475;&#127473;', region: 'europe', gdp: 1090, gdpStr: '$1,090B', potential: 'High', potentialScore: 4, mandate: 'Jul 2030', coverage: ['B2B'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 2100000, invoices: 850000000, tam: 95, taxAuth: 'Belastingdienst', taxUrl: 'https://www.belastingdienst.nl', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Basware 18%, Tradeshift 15%', insights: ['VAT gap: €3B (~5%)', 'Peppol early adopter', 'EU ViDA compliance planned'] },
            { id: 30, country: 'Sweden', flag: '&#127480;&#127466;', region: 'europe', gdp: 590, gdpStr: '$590B', potential: 'High', potentialScore: 4, mandate: 'Jul 2030', coverage: ['B2B','B2G'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 1200000, invoices: 480000000, tam: 55, taxAuth: 'Skatteverket', taxUrl: 'https://www.skatteverket.se', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Pagero 25%, Basware 18%', insights: ['Peppol HQ country', 'VAT gap only ~3%', 'Pagero founded here'] },
            { id: 31, country: 'Norway', flag: '&#127475;&#127476;', region: 'europe', gdp: 485, gdpStr: '$485B', potential: 'High', potentialScore: 4, mandate: 'Jul 2030', coverage: ['B2B','B2G'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 600000, invoices: 320000000, tam: 40, taxAuth: 'Skatteetaten', taxUrl: 'https://www.skatteetaten.no', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Pagero 20%, Visma 18%', insights: ['SAF-T reporting since 2020', 'Oil sector complexities', 'High digital maturity'] },
            { id: 32, country: 'Ireland', flag: '&#127470;&#127466;', region: 'europe', gdp: 530, gdpStr: '$530B', potential: 'High', potentialScore: 4, mandate: 'Nov 2028', coverage: ['B2B'], model: 'Peppol', status: 'Planned', enterprises: 280000, invoices: 180000000, tam: 22, taxAuth: 'Revenue', taxUrl: 'https://www.revenue.ie', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Pagero 18%, Basware 15%', insights: ['MNC hub - transfer pricing focus', 'VAT gap: €1B (~5%)', 'EU ViDA adopter'] },
            { id: 33, country: 'Argentina', flag: '&#127462;&#127479;', region: 'latam', gdp: 640, gdpStr: '$640B', potential: 'High', potentialScore: 4, mandate: '2019', coverage: ['B2B','B2G'], model: 'AFIP (Clearance)', status: 'Active', enterprises: 850000, invoices: 420000000, tam: 25, taxAuth: 'AFIP', taxUrl: 'https://www.afip.gob.ar', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'AFIP (Gov), Sovos 18%', insights: ['Hyperinflation challenges', 'Currency controls impact', 'Export invoice verification strict'] },
            { id: 34, country: 'Colombia', flag: '&#127464;&#127476;', region: 'latam', gdp: 340, gdpStr: '$340B', potential: 'High', potentialScore: 4, mandate: '2018', coverage: ['B2B','B2G'], model: 'Clearance', status: 'Active', enterprises: 1600000, invoices: 380000000, tam: 22, taxAuth: 'DIAN', taxUrl: 'https://www.dian.gov.co', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'DIAN (Gov), Carvajal 20%', insights: ['Tax collection improved 15%', 'Payroll e-invoice required', 'Equivalent document for retail'] },
            { id: 35, country: 'Peru', flag: '&#127477;&#127466;', region: 'latam', gdp: 270, gdpStr: '$270B', potential: 'Medium', potentialScore: 2, mandate: '2014', coverage: ['B2B','B2G'], model: 'Clearance', status: 'Active', enterprises: 2400000, invoices: 280000000, tam: 15, taxAuth: 'SUNAT', taxUrl: 'https://www.sunat.gob.pe', accred: 'Yes (OSE)', accredTime: '3-6 mo', accredMonths: 4, providers: 'SUNAT (Gov), Sovos 15%', insights: ['OSE operators certified', 'Mining sector key', 'High informal economy'] },
            { id: 36, country: 'Egypt', flag: '&#127466;&#127468;', region: 'mena', gdp: 400, gdpStr: '$400B', potential: 'High', potentialScore: 4, mandate: '2020-2025', coverage: ['B2B','B2G'], model: 'ETA (Clearance)', status: 'Active', enterprises: 3800000, invoices: 650000000, tam: 30, taxAuth: 'ETA', taxUrl: 'https://www.eta.gov.eg', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'ETA (Gov), Microsoft 12%', insights: ['Aggressive rollout timeline', 'Currency devaluation impacts', 'High tax evasion historically'] },
            { id: 37, country: 'Israel', flag: '&#127470;&#127473;', region: 'mena', gdp: 520, gdpStr: '$520B', potential: 'High', potentialScore: 4, mandate: '2025-2026', coverage: ['B2B','B2G'], model: 'SHAAM (Clearance)', status: 'Active', enterprises: 650000, invoices: 380000000, tam: 40, taxAuth: 'ITA', taxUrl: 'https://taxes.gov.il', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'ITA (Gov), Priority 15%', insights: ['Tech-savvy business base', 'Security compliance strict', 'Shaam system new 2024'] },
            { id: 38, country: 'Jordan', flag: '&#127471;&#127476;', region: 'mena', gdp: 50, gdpStr: '$50B', potential: 'Low', potentialScore: 1, mandate: 'Apr 2025', coverage: ['B2B','B2G'], model: 'JoFotara (Clearance)', status: 'Active', enterprises: 180000, invoices: 45000000, tam: 3, taxAuth: 'ISTD', taxUrl: 'https://www.istd.gov.jo', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'ISTD (Gov)', insights: ['JoFotara launched 2024', 'Following Saudi model', 'High VAT gap reduction goal'] },
            { id: 39, country: 'Nigeria', flag: '&#127475;&#127468;', region: 'africa', gdp: 475, gdpStr: '$475B', potential: 'High', potentialScore: 4, mandate: 'Nov 2025', coverage: ['B2B','B2G'], model: 'Clearance', status: 'Active', enterprises: 42000000, invoices: 850000000, tam: 35, taxAuth: 'FIRS', taxUrl: 'https://www.firs.gov.ng', accred: 'Yes', accredTime: '6-9 mo', accredMonths: 7, providers: 'TBD', insights: ['Largest African economy', 'Oil sector dominates', 'Tax-to-GDP ratio only 6%'] },
            { id: 40, country: 'South Africa', flag: '&#127487;&#127462;', region: 'africa', gdp: 400, gdpStr: '$400B', potential: 'High', potentialScore: 4, mandate: 'TBD', coverage: ['B2B','B2G'], model: 'TBD', status: 'Planned', enterprises: 2300000, invoices: 520000000, tam: 25, taxAuth: 'SARS', taxUrl: 'https://www.sars.gov.za', accred: 'TBD', accredTime: 'TBD', accredMonths: 6, providers: 'TBD', insights: ['E-filing mature but no CTC', 'VAT fraud concerns', 'Considering e-invoice mandate'] },
            { id: 41, country: 'Kenya', flag: '&#127472;&#127466;', region: 'africa', gdp: 110, gdpStr: '$110B', potential: 'Medium', potentialScore: 2, mandate: '2020', coverage: ['B2B','B2G'], model: 'eTIMS', status: 'Active', enterprises: 450000, invoices: 85000000, tam: 5, taxAuth: 'KRA', taxUrl: 'https://www.kra.go.ke', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'KRA (Gov), Tally 15%', insights: ['eTIMS device-based', 'M-Pesa integration', 'Large informal sector'] },
            // Europe - Additional
            { id: 42, country: 'Austria', flag: '&#127462;&#127481;', region: 'europe', gdp: 470, gdpStr: '$470B', potential: 'High', potentialScore: 4, mandate: 'Jul 2030', coverage: ['B2B','B2G'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 590000, invoices: 320000000, tam: 38, taxAuth: 'BMF', taxUrl: 'https://www.bmf.gv.at', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Pagero 18%, Basware 15%', insights: ['Strong EU ViDA adopter', 'Cash register mandate active', 'High compliance culture'] },
            { id: 43, country: 'Switzerland', flag: '&#127464;&#127469;', region: 'europe', gdp: 880, gdpStr: '$880B', potential: 'High', potentialScore: 4, mandate: 'Voluntary', coverage: ['B2B','B2G'], model: 'Peppol', status: 'Voluntary', enterprises: 620000, invoices: 380000000, tam: 55, taxAuth: 'FTA', taxUrl: 'https://www.estv.admin.ch', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Pagero 20%, Basware 15%', insights: ['Not EU - voluntary adoption', 'High GDP per capita', 'Banking/finance focus'] },
            { id: 44, country: 'Finland', flag: '&#127467;&#127470;', region: 'europe', gdp: 300, gdpStr: '$300B', potential: 'High', potentialScore: 4, mandate: 'Jul 2030', coverage: ['B2B','B2G'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 380000, invoices: 180000000, tam: 22, taxAuth: 'Vero', taxUrl: 'https://www.vero.fi', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Basware 25%, Pagero 18%', insights: ['Peppol pioneer since 2009', 'B2G e-invoice since 2010', 'High digital maturity'] },
            { id: 45, country: 'Denmark', flag: '&#127465;&#127472;', region: 'europe', gdp: 400, gdpStr: '$400B', potential: 'High', potentialScore: 4, mandate: 'Jul 2030', coverage: ['B2B','B2G'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 350000, invoices: 195000000, tam: 24, taxAuth: 'Skattestyrelsen', taxUrl: 'https://www.skat.dk', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Pagero 22%, Visma 18%', insights: ['First B2G mandate globally (2005)', 'VAT gap: ~5% (very low)', 'Strong bookkeeping laws'] },
            { id: 46, country: 'Portugal', flag: '&#127477;&#127481;', region: 'europe', gdp: 280, gdpStr: '$280B', potential: 'High', potentialScore: 4, mandate: '2024', coverage: ['B2B','B2G'], model: 'SAF-T', status: 'Active', enterprises: 1400000, invoices: 320000000, tam: 35, taxAuth: 'AT', taxUrl: 'https://www.portaldasfinancas.gov.pt', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'Sage 20%, Primavera 18%', insights: ['SAF-T PT pioneer', 'High tourism sector', 'QR code on invoices required'] },
            { id: 47, country: 'Greece', flag: '&#127468;&#127479;', region: 'europe', gdp: 220, gdpStr: '$220B', potential: 'High', potentialScore: 4, mandate: '2020', coverage: ['B2B','B2G'], model: 'myDATA', status: 'Active', enterprises: 850000, invoices: 280000000, tam: 28, taxAuth: 'AADE', taxUrl: 'https://www.aade.gr', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'SoftOne 25%, Epsilon Net 20%', insights: ['VAT gap: €5B (~25%)', 'myDATA for real-time reporting', 'Post-crisis tax reform'] },
            { id: 48, country: 'Czech Republic', flag: '&#127464;&#127487;', region: 'europe', gdp: 330, gdpStr: '$330B', potential: 'High', potentialScore: 4, mandate: 'Jul 2030', coverage: ['B2B'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 1500000, invoices: 380000000, tam: 22, taxAuth: 'MF', taxUrl: 'https://www.mfcr.cz', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'SAP 15%, Helios 20%', insights: ['EET cash register active', 'VAT gap: ~12%', 'Manufacturing export hub'] },
            { id: 49, country: 'Slovakia', flag: '&#127480;&#127472;', region: 'europe', gdp: 130, gdpStr: '$130B', potential: 'Medium', potentialScore: 2, mandate: 'Jul 2030', coverage: ['B2B'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 580000, invoices: 145000000, tam: 10, taxAuth: 'FRSR', taxUrl: 'https://www.financnasprava.sk', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'SAP 18%, Pohoda 22%', insights: ['VAT gap: ~15%', 'E-kasa fiscal system active', 'Auto industry dominant'] },
            { id: 50, country: 'Slovenia', flag: '&#127480;&#127470;', region: 'europe', gdp: 65, gdpStr: '$65B', potential: 'Medium', potentialScore: 2, mandate: 'Jul 2030', coverage: ['B2B','B2G'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 210000, invoices: 65000000, tam: 6, taxAuth: 'FURS', taxUrl: 'https://www.fu.gov.si', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Birokrat 25%, SAP 15%', insights: ['Fiscal verification active', 'High EU integration', 'Small but efficient market'] },
            { id: 51, country: 'Croatia', flag: '&#127469;&#127479;', region: 'europe', gdp: 80, gdpStr: '$80B', potential: 'High', potentialScore: 4, mandate: 'Jan 2026', coverage: ['B2B','B2G'], model: 'Fiscalization+eInvoice', status: 'Active', enterprises: 180000, invoices: 85000000, tam: 8, taxAuth: 'Porezna', taxUrl: 'https://www.porezna-uprava.hr', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'Fina 30%, RBA 20%', insights: ['Fiscalization since 2013', 'Tourism-driven economy', 'Joining Eurozone 2023'] },
            { id: 52, country: 'Bulgaria', flag: '&#127463;&#127468;', region: 'europe', gdp: 95, gdpStr: '$95B', potential: 'Medium', potentialScore: 2, mandate: 'Jul 2030', coverage: ['B2B'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 420000, invoices: 125000000, tam: 8, taxAuth: 'NRA', taxUrl: 'https://www.nra.bg', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Microinvest 25%, SAP 12%', insights: ['VAT gap: ~11%', 'Fiscal devices mandatory', 'EU lowest labor costs'] },
            { id: 53, country: 'Latvia', flag: '&#127473;&#127483;', region: 'europe', gdp: 45, gdpStr: '$45B', potential: 'Low', potentialScore: 1, mandate: 'Jul 2030', coverage: ['B2B','B2G'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 180000, invoices: 55000000, tam: 4, taxAuth: 'VID', taxUrl: 'https://www.vid.gov.lv', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Tildes 30%, SAP 10%', insights: ['Strong e-gov infrastructure', 'VAT gap: ~8%', 'Baltic digital leader'] },
            { id: 54, country: 'Lithuania', flag: '&#127473;&#127481;', region: 'europe', gdp: 75, gdpStr: '$75B', potential: 'Medium', potentialScore: 2, mandate: 'Jul 2030', coverage: ['B2B','B2G'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 250000, invoices: 85000000, tam: 6, taxAuth: 'VMI', taxUrl: 'https://www.vmi.lt', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Rivilė 28%, SAP 12%', insights: ['Fintech hub growing', 'Smart-ID national ID', 'VAT gap: ~20%'] },
            { id: 55, country: 'Estonia', flag: '&#127466;&#127466;', region: 'europe', gdp: 40, gdpStr: '$40B', potential: 'Medium', potentialScore: 2, mandate: 'Jul 2030', coverage: ['B2B','B2G'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 140000, invoices: 48000000, tam: 4, taxAuth: 'EMTA', taxUrl: 'https://www.emta.ee', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Omniva 30%, RIK 25%', insights: ['E-Residency program', 'Digital-first government', 'X-Road infrastructure'] },
            { id: 56, country: 'Luxembourg', flag: '&#127473;&#127482;', region: 'europe', gdp: 85, gdpStr: '$85B', potential: 'Medium', potentialScore: 2, mandate: 'Jul 2030', coverage: ['B2B','B2G'], model: 'Peppol (ViDA)', status: 'Planned', enterprises: 45000, invoices: 35000000, tam: 6, taxAuth: 'ACD', taxUrl: 'https://impotsdirects.public.lu', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Basware 22%, Pagero 18%', insights: ['Financial services hub', 'Highest GDP per capita', 'EU institutions presence'] },
            // APAC - Additional
            { id: 57, country: 'Taiwan', flag: '&#127481;&#127484;', region: 'apac', gdp: 790, gdpStr: '$790B', potential: 'High', potentialScore: 4, mandate: '1998', coverage: ['B2B','B2G','B2C'], model: 'eGUI', status: 'Active', enterprises: 1600000, invoices: 850000000, tam: 75, taxAuth: 'MOF', taxUrl: 'https://www.mof.gov.tw', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'Chunghwa 30%, FarEasTone 20%', insights: ['E-GUI lottery system', 'Pioneer since 1998', 'High-tech manufacturing hub'] },
            { id: 58, country: 'Bangladesh', flag: '&#127463;&#127465;', region: 'apac', gdp: 460, gdpStr: '$460B', potential: 'High', potentialScore: 4, mandate: '2024', coverage: ['B2B','B2G'], model: 'NBR', status: 'Active', enterprises: 450000, invoices: 180000000, tam: 8, taxAuth: 'NBR', taxUrl: 'https://www.nbr.gov.bd', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'NBR (Gov), Synesis 15%', insights: ['Textile export economy', 'Low tax-to-GDP ratio', 'Digital payments growing'] },
            { id: 59, country: 'Pakistan', flag: '&#127477;&#127472;', region: 'apac', gdp: 350, gdpStr: '$350B', potential: 'High', potentialScore: 4, mandate: '2024', coverage: ['B2B','B2G'], model: 'FBR', status: 'Active', enterprises: 320000, invoices: 145000000, tam: 6, taxAuth: 'FBR', taxUrl: 'https://www.fbr.gov.pk', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'FBR (Gov), Systems Ltd 18%', insights: ['Track & trace for goods', 'Large informal economy', 'IMF compliance requirements'] },
            { id: 60, country: 'New Zealand', flag: '&#127475;&#127487;', region: 'apac', gdp: 250, gdpStr: '$250B', potential: 'High', potentialScore: 4, mandate: 'Voluntary', coverage: ['B2G'], model: 'Peppol', status: 'Voluntary', enterprises: 550000, invoices: 180000000, tam: 22, taxAuth: 'IRD', taxUrl: 'https://www.ird.govt.nz', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'Xero 35%, MYOB 25%', insights: ['Xero/MYOB stronghold', 'GST system efficient', 'High cloud adoption'] },
            { id: 61, country: 'Sri Lanka', flag: '&#127473;&#127472;', region: 'apac', gdp: 75, gdpStr: '$75B', potential: 'Medium', potentialScore: 2, mandate: '2024', coverage: ['B2B','B2G'], model: 'IRD', status: 'Active', enterprises: 120000, invoices: 45000000, tam: 3, taxAuth: 'IRD', taxUrl: 'https://www.ird.gov.lk', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'IRD (Gov), hSenid 20%', insights: ['Post-crisis recovery', 'Tourism sector key', 'IMF reform requirements'] },
            { id: 62, country: 'Myanmar', flag: '&#127474;&#127474;', region: 'apac', gdp: 60, gdpStr: '$60B', potential: 'Low', potentialScore: 1, mandate: 'TBD', coverage: ['B2B'], model: 'TBD', status: 'Planned', enterprises: 85000, invoices: 25000000, tam: 2, taxAuth: 'IRD', taxUrl: 'https://www.ird.gov.mm', accred: 'TBD', accredTime: 'TBD', accredMonths: 6, providers: 'TBD', insights: ['Political instability', 'Sanctions impact', 'Limited digital infrastructure'] },
            { id: 63, country: 'Cambodia', flag: '&#127464;&#127469;', region: 'apac', gdp: 30, gdpStr: '$30B', potential: 'Low', potentialScore: 1, mandate: '2024', coverage: ['B2B','B2G'], model: 'e-Invoice', status: 'Active', enterprises: 55000, invoices: 18000000, tam: 2, taxAuth: 'GDT', taxUrl: 'https://www.tax.gov.kh', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'GDT (Gov)', insights: ['USD-based economy', 'Garment sector dominant', 'Growing digital adoption'] },
            // MENA - Additional
            { id: 64, country: 'Qatar', flag: '&#127478;&#127462;', region: 'mena', gdp: 220, gdpStr: '$220B', potential: 'High', potentialScore: 4, mandate: 'TBD', coverage: ['B2B','B2G'], model: 'TBD', status: 'Planned', enterprises: 45000, invoices: 35000000, tam: 5, taxAuth: 'GTA', taxUrl: 'https://www.gta.gov.qa', accred: 'TBD', accredTime: 'TBD', accredMonths: 6, providers: 'TBD', insights: ['No income tax', 'LNG revenue dependent', 'Following Saudi e-invoice model'] },
            { id: 65, country: 'Bahrain', flag: '&#127463;&#127469;', region: 'mena', gdp: 45, gdpStr: '$45B', potential: 'Medium', potentialScore: 2, mandate: 'TBD', coverage: ['B2B','B2G'], model: 'TBD', status: 'Planned', enterprises: 28000, invoices: 18000000, tam: 3, taxAuth: 'NBR', taxUrl: 'https://www.nbr.gov.bh', accred: 'TBD', accredTime: 'TBD', accredMonths: 6, providers: 'TBD', insights: ['VAT introduced 2019', 'Financial services hub', 'Small market size'] },
            { id: 66, country: 'Kuwait', flag: '&#127472;&#127484;', region: 'mena', gdp: 165, gdpStr: '$165B', potential: 'Medium', potentialScore: 2, mandate: 'TBD', coverage: ['B2B','B2G'], model: 'TBD', status: 'Planned', enterprises: 35000, invoices: 28000000, tam: 4, taxAuth: 'MOF', taxUrl: 'https://www.mof.gov.kw', accred: 'TBD', accredTime: 'TBD', accredMonths: 6, providers: 'TBD', insights: ['No VAT yet', 'Oil-dependent economy', 'Slow digital adoption'] },
            { id: 67, country: 'Morocco', flag: '&#127474;&#127462;', region: 'mena', gdp: 140, gdpStr: '$140B', potential: 'Medium', potentialScore: 2, mandate: '2024', coverage: ['B2B','B2G'], model: 'Clearance', status: 'Active', enterprises: 280000, invoices: 95000000, tam: 6, taxAuth: 'DGI', taxUrl: 'https://www.tax.gov.ma', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'DGI (Gov), Sage 15%', insights: ['Africa gateway market', 'French legal system', 'Auto manufacturing hub'] },
            { id: 68, country: 'Tunisia', flag: '&#127481;&#127475;', region: 'mena', gdp: 50, gdpStr: '$50B', potential: 'Low', potentialScore: 1, mandate: '2016', coverage: ['B2B','B2G'], model: 'TTN', status: 'Active', enterprises: 180000, invoices: 45000000, tam: 3, taxAuth: 'DGI', taxUrl: 'https://www.finances.gov.tn', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'TTN (Gov)', insights: ['Early MENA adopter', 'Tourism dependent', 'Economic challenges'] },
            { id: 69, country: 'Iraq', flag: '&#127470;&#127478;', region: 'mena', gdp: 270, gdpStr: '$270B', potential: 'Medium', potentialScore: 2, mandate: 'TBD', coverage: ['B2B','B2G'], model: 'TBD', status: 'Planned', enterprises: 95000, invoices: 35000000, tam: 3, taxAuth: 'GCT', taxUrl: 'https://tax.mof.gov.iq', accred: 'TBD', accredTime: 'TBD', accredMonths: 6, providers: 'TBD', insights: ['Oil sector 90% revenue', 'Reconstruction phase', 'Limited digital infrastructure'] },
            // Africa - Additional
            { id: 70, country: 'Ghana', flag: '&#127468;&#127469;', region: 'africa', gdp: 80, gdpStr: '$80B', potential: 'Medium', potentialScore: 2, mandate: 'Oct 2022', coverage: ['B2B','B2G'], model: 'Fiscal Device', status: 'Active', enterprises: 180000, invoices: 65000000, tam: 4, taxAuth: 'GRA', taxUrl: 'https://www.gra.gov.gh', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'GRA (Gov), Hubtel 18%', insights: ['Fiscal device mandate', 'E-levy controversy', 'Mobile money dominant'] },
            { id: 71, country: 'Tanzania', flag: '&#127481;&#127487;', region: 'africa', gdp: 75, gdpStr: '$75B', potential: 'Medium', potentialScore: 2, mandate: '2022', coverage: ['B2B','B2G'], model: 'EFD', status: 'Active', enterprises: 165000, invoices: 55000000, tam: 3, taxAuth: 'TRA', taxUrl: 'https://www.tra.go.tz', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'TRA (Gov)', insights: ['EFD machine required', 'Mining sector key', 'Agriculture dominant'] },
            { id: 72, country: 'Uganda', flag: '&#127482;&#127468;', region: 'africa', gdp: 45, gdpStr: '$45B', potential: 'Low', potentialScore: 1, mandate: '2020', coverage: ['B2B','B2G'], model: 'EFRIS', status: 'Active', enterprises: 120000, invoices: 35000000, tam: 2, taxAuth: 'URA', taxUrl: 'https://www.ura.go.ug', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'URA (Gov)', insights: ['EFRIS real-time system', 'Oil sector emerging', 'Large informal economy'] },
            { id: 73, country: 'Rwanda', flag: '&#127479;&#127484;', region: 'africa', gdp: 14, gdpStr: '$14B', potential: 'Low', potentialScore: 1, mandate: '2020', coverage: ['B2B','B2G'], model: 'EBM', status: 'Active', enterprises: 45000, invoices: 15000000, tam: 1, taxAuth: 'RRA', taxUrl: 'https://www.rra.gov.rw', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'RRA (Gov)', insights: ['Digital governance leader', 'EBM machine mandate', 'Strong compliance culture'] },
            { id: 74, country: 'Ethiopia', flag: '&#127466;&#127481;', region: 'africa', gdp: 155, gdpStr: '$155B', potential: 'Medium', potentialScore: 2, mandate: 'TBD', coverage: ['B2B','B2G'], model: 'TBD', status: 'Planned', enterprises: 95000, invoices: 28000000, tam: 2, taxAuth: 'MOR', taxUrl: 'https://www.mor.gov.et', accred: 'TBD', accredTime: 'TBD', accredMonths: 6, providers: 'TBD', insights: ['Fastest growing economy', 'Telecom monopoly', 'Coffee export dominant'] },
            // Americas - Additional
            { id: 75, country: 'Ecuador', flag: '&#127466;&#127464;', region: 'latam', gdp: 120, gdpStr: '$120B', potential: 'Medium', potentialScore: 2, mandate: '2012', coverage: ['B2B','B2G'], model: 'Clearance', status: 'Active', enterprises: 520000, invoices: 180000000, tam: 12, taxAuth: 'SRI', taxUrl: 'https://www.sri.gob.ec', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'SRI (Gov), Dátil 20%', insights: ['USD economy (dollarized)', 'Oil export dependent', 'E-invoice since 2012'] },
            { id: 76, country: 'Uruguay', flag: '&#127482;&#127486;', region: 'latam', gdp: 75, gdpStr: '$75B', potential: 'Medium', potentialScore: 2, mandate: '2017', coverage: ['B2B','B2G'], model: 'CFE', status: 'Active', enterprises: 180000, invoices: 85000000, tam: 6, taxAuth: 'DGI', taxUrl: 'https://www.dgi.gub.uy', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'DGI (Gov), Uruware 18%', insights: ['CFE system mature', 'High compliance rate', 'Tech-friendly regulations'] },
            { id: 77, country: 'Costa Rica', flag: '&#127464;&#127479;', region: 'latam', gdp: 70, gdpStr: '$70B', potential: 'Medium', potentialScore: 2, mandate: '2018', coverage: ['B2B','B2G'], model: 'Clearance', status: 'Active', enterprises: 145000, invoices: 65000000, tam: 5, taxAuth: 'DGT', taxUrl: 'https://www.hacienda.go.cr', accred: 'Yes', accredTime: '3-6 mo', accredMonths: 4, providers: 'Hacienda (Gov), Gosocket 22%', insights: ['100% renewable energy', 'Tech hub Central America', 'Stable regulatory environment'] },
            { id: 78, country: 'Canada', flag: '&#127464;&#127462;', region: 'northam', gdp: 2140, gdpStr: '$2,140B', potential: 'Very High', potentialScore: 5, mandate: 'Voluntary', coverage: ['B2G'], model: 'Peppol', status: 'Voluntary', enterprises: 3800000, invoices: 1800000000, tam: 180, taxAuth: 'CRA', taxUrl: 'https://www.canada.ca/en/revenue-agency', accred: 'Yes (Peppol AP)', accredTime: '1-2 mo', accredMonths: 1, providers: 'SAP 20%, Coupa 18%', insights: ['No federal e-invoice mandate', 'Provincial variations', 'Large market potential'] },
        ];

        let currentSort = { field: 'mandateDate', desc: false };
        let currentRegion = 'all';
        let currentStatus = 'all';

        // Provider website URLs mapping (commercial + government portals)
        const providerUrls = {
            // Commercial providers
            'sovos': 'https://sovos.com',
            'edicom': 'https://edicomgroup.com',
            'basware': 'https://www.basware.com',
            'pagero': 'https://www.pagero.com',
            'sap': 'https://www.sap.com',
            'coupa': 'https://www.coupa.com',
            'tradeshift': 'https://tradeshift.com',
            'tungsten': 'https://www.tungsten-network.com',
            'aruba': 'https://www.aruba.it',
            'teamsystem': 'https://www.teamsystem.com',
            'cleartax': 'https://cleartax.in',
            'vayana': 'https://vayana.com',
            'foriba': 'https://www.foriba.com',
            'logo': 'https://www.logo.com.tr',
            'comarch': 'https://www.comarch.com',
            'generix': 'https://www.generixgroup.com',
            'storecove': 'https://www.storecove.com',
            'oracle': 'https://www.oracle.com',
            'microsoft': 'https://www.microsoft.com',
            'sage': 'https://www.sage.com',
            'xero': 'https://www.xero.com',
            'myob': 'https://www.myob.com',
            'tally': 'https://tallysolutions.com',
            'zoho': 'https://www.zoho.com',
            'visma': 'https://www.visma.com',
            'link4': 'https://www.link4.com.au',
            'messagexchange': 'https://www.messagexchange.com',
            'ecosio': 'https://ecosio.com',
            'carvajal': 'https://www.carvajal.com',
            'gosocket': 'https://www.gosocket.net',
            'softone': 'https://www.softone.gr',
            'epsilon net': 'https://www.epsilonnet.gr',
            'primavera': 'https://pt.primaverabss.com',
            'baiwang': 'https://www.baiwang.com',
            'aisino': 'https://www.aisino.com',
            'misa': 'https://www.misa.vn',
            'viettel': 'https://viettel.com.vn',
            'onlinepajak': 'https://www.online-pajak.com',
            'chunghwa': 'https://www.cht.com.tw',
            'fareastone': 'https://www.fetnet.net',
            'priority': 'https://www.priority-software.com',
            'seres': 'https://www.seres.es',
            'hubtel': 'https://hubtel.com',
            'synesis': 'https://synesis-it.com',
            'systems ltd': 'https://www.systemsltd.com',
            'hsenid': 'https://www.hsenidmobile.com',
            'datil': 'https://datil.com',
            'uruware': 'https://uruware.com',
            'freee': 'https://www.freee.co.jp',
            'tkc': 'https://www.tkc.jp',
            'sap ariba': 'https://www.ariba.com',
            'helios': 'https://www.helios.eu',
            'pohoda': 'https://www.stormware.cz',
            'birokrat': 'https://www.birokrat.si',
            'microinvest': 'https://www.microinvest.net',
            'tildes': 'https://www.tilde.lv',
            'rivile': 'https://www.rivile.lt',
            'omniva': 'https://www.omniva.ee',
            'rik': 'https://www.rik.ee',
            'postis': 'https://postis.ro',
            'fina': 'https://www.fina.hr',
            'rba': 'https://www.rba.hr',
            // Government e-invoicing portals
            'ksef': 'https://ksef.mf.gov.pl',
            'fatoora': 'https://zatca.gov.sa/en/E-Invoicing',
            'myinvois': 'https://www.hasil.gov.my/myinvois',
            'sdi': 'https://www.fatturapa.gov.it',
            'chorus pro': 'https://chorus-pro.gouv.fr',
            'invoicenow': 'https://www.imda.gov.sg/invoicenow',
            'peppol': 'https://peppol.org',
            'nts': 'https://www.nts.go.kr',
            'gib': 'https://ebelge.gib.gov.tr',
            'anaf': 'https://www.anaf.ro/efactura',
            'nav': 'https://onlineszamla.nav.gov.hu',
            'sii': 'https://www.sii.cl/factura_electronica',
            'dian': 'https://www.dian.gov.co/fizcalizacioncontrol/heraboram/factura-electronica',
            'sunat': 'https://cpe.sunat.gob.pe',
            'afip': 'https://www.afip.gob.ar/facturacion',
            'eta': 'https://www.eta.gov.eg',
            'lhdn': 'https://www.hasil.gov.my',
            'djp': 'https://www.pajak.go.id',
            'firs': 'https://www.firs.gov.ng',
            'sars': 'https://www.sars.gov.za',
            'kra': 'https://www.kra.go.ke/etims',
            'gra': 'https://www.gra.gov.gh',
            'tra': 'https://www.tra.go.tz',
            'ura': 'https://www.ura.go.ug/efris',
            'rra': 'https://www.rra.gov.rw',
            'nbr': 'https://www.nbr.gov.bd',
            'fbr': 'https://www.fbr.gov.pk',
            'ird': 'https://www.ird.govt.nz',
            'gdt': 'https://www.gdt.gov.vn',
            'bir': 'https://www.bir.gov.ph',
            'rd': 'https://www.rd.go.th',
            'sri': 'https://www.sri.gob.ec',
            'dgi': 'https://www.dgi.gub.uy',
            'dgt': 'https://www.hacienda.go.cr',
            'aade': 'https://www.aade.gr/mydata',
            'at': 'https://www.portaldasfinancas.gov.pt',
            'shaam': 'https://taxes.gov.il',
            'istd': 'https://www.istd.gov.jo/jofotara',
            'coretax': 'https://coretax.pajak.go.id',
            'verifactu': 'https://www.agenciatributaria.es',
            'ttn': 'https://www.finances.gov.tn'
        };

        function formatProviders(providersStr) {
            if (!providersStr || providersStr === 'TBD') return providersStr;

            // Split by comma and process each provider
            return providersStr.split(',').map(p => {
                const trimmed = p.trim();
                // Extract provider name - handle formats like "KSeF (Gov)", "Sovos 25%", "SAP Ariba"
                const match = trimmed.match(/^([A-Za-z0-9\s]+?)(?:\s*\(|\s*\d|$)/);
                if (match) {
                    const name = match[1].trim().toLowerCase();
                    const url = providerUrls[name];
                    if (url) {
                        return `<a href="${url}" target="_blank">${trimmed}</a>`;
                    }
                }
                return trimmed;
            }).join(', ');
        }

        // Parse mandate date string to sortable timestamp (closest future date first)
        function parseMandateDate(mandate) {
            if (!mandate) return { date: Infinity, unknown: true };
            const m = mandate.toLowerCase().trim();

            // Known "no timeline" values
            if (m === 'tbd' || m === 'voluntary' || m.includes('voluntary') || m.includes('b2g active')) {
                return { date: Infinity, unknown: true };
            }

            const now = new Date();
            const nowTime = now.getTime();

            // Helper to check if date is past
            const isPast = (date) => date.getTime() < nowTime;

            // Already active/past (just year like 2008, 2010, 2019, etc.)
            const justYear = m.match(/^(\d{4})$/);
            if (justYear) {
                const year = parseInt(justYear[1]);
                const date = new Date(year, 6, 1); // Mid-year
                return { date: date.getTime(), unknown: false, past: isPast(date) };
            }

            // Month Year format (Jan 2026, Sep 2026, Jul 2025)
            const monthYear = m.match(/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\w*\s*(\d{4})$/i);
            if (monthYear) {
                const months = { jan: 0, feb: 1, mar: 2, apr: 3, may: 4, jun: 5, jul: 6, aug: 7, sep: 8, oct: 9, nov: 10, dec: 11 };
                const month = months[monthYear[1].toLowerCase().substring(0, 3)];
                const year = parseInt(monthYear[2]);
                const date = new Date(year, month, 1);
                return { date: date.getTime(), unknown: false, past: isPast(date) };
            }

            // Year range (2021-2026, 2025-2028) - use start year for sorting
            const yearRange = m.match(/(\d{4})\s*[-–]\s*(\d{4})/);
            if (yearRange) {
                const startYear = parseInt(yearRange[1]);
                const date = new Date(startYear, 6, 1);
                return { date: date.getTime(), unknown: false, past: isPast(date) };
            }

            // H1/H2 Year format (H1 2027)
            const halfYear = m.match(/(h[12])\s*(\d{4})/i);
            if (halfYear) {
                const month = halfYear[1].toLowerCase() === 'h1' ? 3 : 9;
                const year = parseInt(halfYear[2]);
                const date = new Date(year, month, 1);
                return { date: date.getTime(), unknown: false, past: isPast(date) };
            }

            // Late/Early Year (Late 2025)
            const lateEarly = m.match(/(late|early)\s*(\d{4})/i);
            if (lateEarly) {
                const month = lateEarly[1].toLowerCase() === 'late' ? 10 : 2;
                const year = parseInt(lateEarly[2]);
                const date = new Date(year, month, 1);
                return { date: date.getTime(), unknown: false, past: isPast(date) };
            }

            // QIS or special formats with year (e.g., "QIS 2023", "Oct 2022")
            const anyYear = m.match(/(\d{4})/);
            if (anyYear) {
                const year = parseInt(anyYear[1]);
                const date = new Date(year, 6, 1);
                return { date: date.getTime(), unknown: false, past: isPast(date) };
            }

            return { date: Infinity, unknown: true };
        }

        function getFilteredSortedData() {
            let data = [...countries];

            // Apply region filter
            if (currentRegion !== 'all') {
                data = data.filter(c => c.region === currentRegion);
            }

            // Apply status filter
            if (currentStatus !== 'all') {
                data = data.filter(c => c.status === currentStatus);
            }

            // Apply search filter
            const searchFilter = document.getElementById('searchBox').value.toLowerCase();
            if (searchFilter) {
                data = data.filter(c =>
                    c.country.toLowerCase().includes(searchFilter) ||
                    c.model.toLowerCase().includes(searchFilter) ||
                    c.taxAuth.toLowerCase().includes(searchFilter) ||
                    c.mandate.toLowerCase().includes(searchFilter)
                );
            }

            // Apply sort
            if (currentSort.field) {
                if (currentSort.field === 'mandateDate') {
                    data.sort((a, b) => {
                        const aDate = parseMandateDate(a.mandate);
                        const bDate = parseMandateDate(b.mandate);
                        // Unknown/TBD mandates at the end, otherwise sort by date
                        if (aDate.unknown && !bDate.unknown) return 1;
                        if (!aDate.unknown && bDate.unknown) return -1;
                        return currentSort.desc ? bDate.date - aDate.date : aDate.date - bDate.date;
                    });
                } else {
                    data.sort((a, b) => {
                        const aVal = a[currentSort.field];
                        const bVal = b[currentSort.field];
                        if (typeof aVal === 'string') {
                            return currentSort.desc ? bVal.localeCompare(aVal) : aVal.localeCompare(bVal);
                        }
                        return currentSort.desc ? bVal - aVal : aVal - bVal;
                    });
                }
            }

            return data;
        }

        function renderTable(data) {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = data.map((c, i) => `
                <tr>
                    <td>${i + 1}</td>
                    <td class="country-cell"><strong>${c.flag} ${c.country}</strong>${c.insights && c.insights.length ? `<span class="info-icon">i<span class="tooltip"><span class="tooltip-label">Key Insights</span>${c.insights.map(ins => `<span class="tooltip-fact">• ${ins}</span>`).join('')}</span></span>` : ''}</td>
                    <td>${c.gdpStr}</td>
                    <td><span class="potential potential-${c.potential.toLowerCase().replace(' ','-')}">${c.potential}</span></td>
                    <td class="wrap">${c.mandate}</td>
                    <td>${c.coverage.map(cov => `<span class="coverage coverage-${cov.toLowerCase()}">${cov}</span>`).join(' ')}</td>
                    <td class="small-text">${c.model}</td>
                    <td><span class="status status-${c.status.toLowerCase().split(' ')[0]}">${c.status}</span></td>
                    <td>${(c.enterprises/1000000).toFixed(1)}M</td>
                    <td>${(c.invoices/1000000000).toFixed(1)}B</td>
                    <td>$${c.tam}</td>
                    <td><a href="${c.taxUrl}" target="_blank">${c.taxAuth}</a></td>
                    <td class="${c.accred.includes('Yes') ? 'accred-yes' : 'accred-no'}">${c.accred}</td>
                    <td>${c.accredTime}</td>
                    <td class="players small-text">${formatProviders(c.providers)}</td>
                </tr>
            `).join('');
        }

        function sortTable(field) {
            const fieldMap = {
                'mandate': 'mandateDate',
                'country': 'country',
                'gdp': 'gdp',
                'potential': 'potentialScore',
                'tam': 'tam',
                'enterprises': 'enterprises',
                'accredTime': 'accredMonths'
            };
            const sortField = fieldMap[field] || field;
            const clickedBtn = event.target;

            // If clicking same button that's active, toggle off (show default mandate sort)
            if (clickedBtn.classList.contains('active') && currentSort.field === sortField) {
                currentSort.field = 'mandateDate';
                currentSort.desc = false;
                renderTable(getFilteredSortedData());
                document.querySelectorAll('.sort-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelector('.sort-btn').classList.add('active'); // First button is Mandate Date
                return;
            }

            if (currentSort.field === sortField) {
                currentSort.desc = !currentSort.desc;
            } else {
                currentSort.field = sortField;
                currentSort.desc = sortField === 'mandateDate' ? false : true; // Mandate sorts ascending by default
            }

            renderTable(getFilteredSortedData());

            // Update button styles
            document.querySelectorAll('.sort-btn').forEach(btn => btn.classList.remove('active'));
            clickedBtn.classList.add('active');
        }

        function filterTable() {
            currentRegion = document.getElementById('regionFilter').value;
            currentStatus = document.getElementById('statusFilter').value;
            renderTable(getFilteredSortedData());
        }

        function showMainSection(id, updateHash = true) {
            document.querySelectorAll('.main-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            const section = document.getElementById(id);
            if (section) {
                section.classList.add('active');
                // Find and activate the corresponding nav button
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    if (btn.getAttribute('data-tab') === id) {
                        btn.classList.add('active');
                    }
                });
                // Update URL hash
                if (updateHash) {
                    history.pushState(null, '', '#' + id);
                }
            }
        }

        // Handle hash changes (back/forward navigation)
        window.addEventListener('hashchange', function() {
            const hash = window.location.hash.slice(1);
            if (hash) showMainSection(hash, false);
        });

        // Load correct tab on page load based on URL hash
        window.addEventListener('DOMContentLoaded', function() {
            const hash = window.location.hash.slice(1);
            if (hash) {
                showMainSection(hash, false);
            }
        });

        function renderTimelineGraph() {
            const container = document.getElementById('timelineVisual');
            const months = { jan: 0, feb: 1, mar: 2, apr: 3, may: 4, jun: 5, jul: 6, aug: 7, sep: 8, oct: 9, nov: 10, dec: 11 };
            const currentYear = new Date().getFullYear();

            // Generate events from all countries
            const knownEvents = [];
            const unknownTimeline = [];

            countries.forEach(c => {
                const parsed = parseMandateDate(c.mandate);
                const mandate = c.mandate.toLowerCase().trim();

                if (parsed.unknown) {
                    unknownTimeline.push(c);
                    return;
                }

                // Determine display date and type
                let year, month, type;
                const statusLower = c.status.toLowerCase();

                if (statusLower === 'active') type = 'active';
                else if (statusLower === 'pending' || statusLower === 'phased') type = 'pending';
                else type = 'planned';

                // Parse specific month/year
                const monthYearMatch = mandate.match(/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\w*\s*(\d{4})$/i);
                if (monthYearMatch) {
                    month = monthYearMatch[1].substring(0, 3).charAt(0).toUpperCase() + monthYearMatch[1].substring(0, 3).slice(1);
                    year = parseInt(monthYearMatch[2]);
                } else {
                    // Extract year from mandate
                    const yearMatch = mandate.match(/(\d{4})/);
                    if (yearMatch) {
                        year = parseInt(yearMatch[1]);
                        // Check for year ranges - use end year
                        const rangeMatch = mandate.match(/(\d{4})\s*[-–]\s*(\d{4})/);
                        if (rangeMatch) year = parseInt(rangeMatch[2]);
                        month = '';
                    }
                }

                // H1/H2 format
                const halfMatch = mandate.match(/(h[12])\s*(\d{4})/i);
                if (halfMatch) {
                    month = halfMatch[1].toUpperCase();
                    year = parseInt(halfMatch[2]);
                }

                // Late/Early
                const lateEarlyMatch = mandate.match(/(late|early)\s*(\d{4})/i);
                if (lateEarlyMatch) {
                    month = lateEarlyMatch[1].charAt(0).toUpperCase() + lateEarlyMatch[1].slice(1);
                    year = parseInt(lateEarlyMatch[2]);
                }

                if (year) {
                    knownEvents.push({
                        year,
                        month: month || '',
                        flag: c.flag,
                        country: c.country,
                        type,
                        desc: c.model,
                        sortDate: parsed.date
                    });
                }
            });

            // Sort events by date
            knownEvents.sort((a, b) => a.sortDate - b.sortDate);

            // Group by year
            const grouped = {};
            knownEvents.forEach(evt => {
                if (!grouped[evt.year]) grouped[evt.year] = [];
                grouped[evt.year].push(evt);
            });

            let html = '';

            // Render known timeline years
            Object.keys(grouped).sort((a, b) => parseInt(a) - parseInt(b)).forEach(year => {
                const yearEvents = grouped[year];
                html += `<div class="timeline-year-group">`;
                html += `<div class="timeline-year-label">${year}</div>`;
                html += `<div class="timeline-year-line"></div>`;
                html += `<div class="timeline-events">`;
                yearEvents.forEach(evt => {
                    const statusClass = evt.type === 'active' ? 'status-active' : evt.type === 'pending' ? 'status-pending' : 'status-planned';
                    html += `
                        <div class="timeline-event ${statusClass}">
                            <span class="timeline-event-flag">${evt.flag}</span>
                            <div class="timeline-event-info">
                                <span class="timeline-event-country">${evt.country}</span>
                                <span class="timeline-event-date">${evt.month ? evt.month + ' ' : ''}${evt.year}</span>
                                <span class="timeline-event-desc">${evt.desc}</span>
                            </div>
                        </div>
                    `;
                });
                html += `</div></div>`;
            });

            // Render unknown timeline section
            if (unknownTimeline.length > 0) {
                html += `<div class="timeline-year-group timeline-unknown">`;
                html += `<div class="timeline-year-label">TBD</div>`;
                html += `<div class="timeline-year-line" style="background: #94a3b8;"></div>`;
                html += `<div class="timeline-events">`;
                unknownTimeline.sort((a, b) => b.gdp - a.gdp).forEach(c => {
                    html += `
                        <div class="timeline-event status-voluntary">
                            <span class="timeline-event-flag">${c.flag}</span>
                            <div class="timeline-event-info">
                                <span class="timeline-event-country">${c.country}</span>
                                <span class="timeline-event-date">${c.mandate}</span>
                                <span class="timeline-event-desc">${c.model || 'Timeline not announced'}</span>
                            </div>
                        </div>
                    `;
                });
                html += `</div></div>`;
            }

            container.innerHTML = html;
        }

        // Initialize with default sort by mandate date
        renderTable(getFilteredSortedData());
        renderTimelineGraph();

        // Data Residency Section Functions
        const drCountryData = [
            {country:"Saudi Arabia",region:"MENA",residency:"Mandatory Domestic",dcReq:"Local DC Required",hosting:"Local Saudi DC only",archival:"6-11 years",confidence:"High"},
            {country:"UAE",region:"MENA",residency:"Mandatory Domestic",dcReq:"AWS me-central-1",hosting:"AWS me-central-1 (UAE)",archival:"5-15 years",confidence:"High"},
            {country:"Turkey",region:"MENA",residency:"Mandatory Domestic",dcReq:"Local DC Required",hosting:"Local Turkish DC",archival:"5-10 years",confidence:"High"},
            {country:"Egypt",region:"MENA",residency:"Flexible",dcReq:"Any Region",hosting:"Any AWS (recommend me-south-1)",archival:"5-7 years",confidence:"Medium"},
            {country:"Israel",region:"MENA",residency:"Conditional",dcReq:"AWS il-central-1",hosting:"AWS il-central-1 (Tel Aviv)",archival:"7 years",confidence:"Medium"},
            {country:"Oman",region:"MENA",residency:"Flexible",dcReq:"Any Region",hosting:"Any AWS (recommend me-south-1)",archival:"10 years",confidence:"Medium"},
            {country:"Jordan",region:"MENA",residency:"Flexible",dcReq:"Any Region",hosting:"Any AWS (recommend me-south-1)",archival:"4-10 years",confidence:"Medium"},
            {country:"Qatar",region:"MENA",residency:"Conditional",dcReq:"Any Region",hosting:"Any AWS (recommend me-south-1)",archival:"10 years",confidence:"Medium"},
            {country:"Bahrain",region:"MENA",residency:"Flexible",dcReq:"AWS me-south-1",hosting:"AWS me-south-1 (Bahrain)",archival:"10 years",confidence:"Medium"},
            {country:"Kuwait",region:"MENA",residency:"N/A",dcReq:"Any Region",hosting:"Any AWS (recommend me-south-1)",archival:"10 years",confidence:"Low"},
            {country:"Morocco",region:"MENA",residency:"Conditional",dcReq:"EU Region + Auth",hosting:"EU region with CNDP authorization",archival:"10 years",confidence:"Low"},
            {country:"Tunisia",region:"MENA",residency:"Conditional",dcReq:"Local DC Preferred",hosting:"Local or TTN centralized",archival:"10 years",confidence:"Medium"},
            {country:"Iraq",region:"MENA",residency:"N/A",dcReq:"Any Region",hosting:"Any AWS (recommend me-south-1)",archival:"N/A",confidence:"Low"},
            {country:"Germany",region:"Europe",residency:"Conditional",dcReq:"EU + Approval",hosting:"AWS eu-central-1 (Frankfurt)",archival:"8-10 years",confidence:"High"},
            {country:"France",region:"Europe",residency:"EU Required",dcReq:"AWS eu-west-3 *",hosting:"AWS eu-west-3 (Paris) - needs SecNumCloud",archival:"10 years",confidence:"High"},
            {country:"Italy",region:"Europe",residency:"EU Preferred",dcReq:"Any EU Region",hosting:"AWS eu-south-1 (Milan)",archival:"10-15 years",confidence:"High"},
            {country:"Spain",region:"Europe",residency:"EU OK",dcReq:"Any EU Region",hosting:"AWS eu-south-2 (Spain)",archival:"4-6 years",confidence:"High"},
            {country:"Poland",region:"Europe",residency:"Centralized (KSeF)",dcReq:"Govt System",hosting:"KSeF handles storage",archival:"10 years",confidence:"High"},
            {country:"Belgium",region:"Europe",residency:"EU OK",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"10 years",confidence:"High"},
            {country:"United Kingdom",region:"Europe",residency:"Flexible",dcReq:"Any Region",hosting:"AWS eu-west-2 (London)",archival:"6 years",confidence:"High"},
            {country:"Romania",region:"Europe",residency:"EU OK",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"10-25 years",confidence:"High"},
            {country:"Hungary",region:"Europe",residency:"EU OK",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"5-8 years",confidence:"High"},
            {country:"Netherlands",region:"Europe",residency:"EU OK",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"7-10 years",confidence:"High"},
            {country:"Sweden",region:"Europe",residency:"Conditional",dcReq:"EU + Notify",hosting:"AWS eu-north-1 (Stockholm)",archival:"7 years",confidence:"High"},
            {country:"Norway",region:"Europe",residency:"Conditional",dcReq:"Nordic/EEA + Notify",hosting:"AWS eu-north-1 (Stockholm)",archival:"Up to 35 years",confidence:"High"},
            {country:"Ireland",region:"Europe",residency:"EU OK",dcReq:"AWS eu-west-1",hosting:"AWS eu-west-1 (Ireland)",archival:"6 years",confidence:"High"},
            {country:"Austria",region:"Europe",residency:"Flexible",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"7-22 years",confidence:"High"},
            {country:"Switzerland",region:"Europe",residency:"Flexible",dcReq:"AWS eu-central-2",hosting:"AWS eu-central-2 (Zurich)",archival:"10 years",confidence:"High"},
            {country:"Finland",region:"Europe",residency:"EU/EEA Preferred",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"6-10 years",confidence:"Medium"},
            {country:"Denmark",region:"Europe",residency:"Flexible",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"5 years",confidence:"High"},
            {country:"Portugal",region:"Europe",residency:"Conditional",dcReq:"EU Region",hosting:"Any EU AWS region",archival:"10 years",confidence:"High"},
            {country:"Greece",region:"Europe",residency:"Flexible",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"5-10 years",confidence:"Medium"},
            {country:"Czech Republic",region:"Europe",residency:"Flexible",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"10 years",confidence:"High"},
            {country:"Slovakia",region:"Europe",residency:"Flexible",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"10 years",confidence:"High"},
            {country:"Slovenia",region:"Europe",residency:"EU OK",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"10-20 years",confidence:"Medium"},
            {country:"Croatia",region:"Europe",residency:"Flexible",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"11 years",confidence:"Medium"},
            {country:"Bulgaria",region:"Europe",residency:"Flexible",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"10 years",confidence:"Medium"},
            {country:"Latvia",region:"Europe",residency:"Flexible",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"5-10 years",confidence:"Medium"},
            {country:"Lithuania",region:"Europe",residency:"EU OK",dcReq:"Any EU Region",hosting:"Any EU AWS region",archival:"10 years",confidence:"Medium"},
            {country:"Estonia",region:"Europe",residency:"Flexible",dcReq:"Any Region",hosting:"Any AWS region",archival:"7 years",confidence:"High"},
            {country:"Luxembourg",region:"Europe",residency:"Mandatory Domestic",dcReq:"Local DC Required",hosting:"Local Luxembourg DC",archival:"10 years",confidence:"High"}
        ];

        // Data Residency Search
        const drSearchInput = document.getElementById('drSearchInput');
        if (drSearchInput) {
            drSearchInput.addEventListener('input', filterDRCountries);
        }

        function filterDRCountries() {
            const searchTerm = drSearchInput.value.toLowerCase();
            const menaRows = document.querySelectorAll('#dr-mena-table tbody tr');
            const europeRows = document.querySelectorAll('#dr-europe-table tbody tr');
            let menaVisible = 0, europeVisible = 0;

            menaRows.forEach(row => {
                const country = row.dataset.country || '';
                if (country.includes(searchTerm)) {
                    row.style.display = '';
                    menaVisible++;
                } else {
                    row.style.display = 'none';
                }
            });

            europeRows.forEach(row => {
                const country = row.dataset.country || '';
                if (country.includes(searchTerm)) {
                    row.style.display = '';
                    europeVisible++;
                } else {
                    row.style.display = 'none';
                }
            });

            document.getElementById('dr-mena-count').textContent = menaVisible + ' countries';
            document.getElementById('dr-europe-count').textContent = europeVisible + ' countries';
        }

        function downloadDRCSV() {
            const headers = ['Country', 'Region', 'Data Residency', 'DC Requirement', 'Recommended Hosting', 'Archival Period', 'Confidence'];
            const rows = drCountryData.map(c => [c.country, c.region, c.residency, c.dcReq, c.hosting, c.archival, c.confidence]);

            let csv = headers.join(',') + '\n';
            rows.forEach(row => {
                csv += row.map(cell => `"${cell}"`).join(',') + '\n';
            });

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'einvoice-data-residency-report.csv';
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
